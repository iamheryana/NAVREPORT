<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="04037_02_SubRptRealisasi" language="groovy" pageWidth="509" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="509" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="b406b291-7ccc-4e85-8d33-6ed4d9da73cd">
	<property name="ireport.zoom" value="1.7715610000001707"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="Potensi" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Size" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="ItemCategory" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Company" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales" class="java.lang.String"/>
	<parameter name="Cabang" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Principal" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="App" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Size1" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Size2" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Size3" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Size4" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales1" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales2" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales3" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales4" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales5" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales6" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales7" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales8" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales9" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales10" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales11" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales12" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales13" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales14" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales15" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales16" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales17" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales18" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales19" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales20" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales21" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales22" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales23" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales24" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales25" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales26" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales27" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales28" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales29" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales30" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales31" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales32" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales33" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales34" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales35" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales36" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales37" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales38" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales39" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales40" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales41" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales42" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales43" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales44" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales45" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales46" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales47" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales48" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales49" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Sales50" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT	XXX.URUTAN_GROUP
		,XXX.URUTAN
		,XXX.JUDUL
		,SUM(XXX.AMOUNT) AS AMOUNT
		,SUM(XXX.AMOUNT_SUM) AS AMOUNT_SUM
FROM	(
			SELECT	'A' AS URUTAN_GROUP
					,'A1' AS URUTAN
					,'REALISASI '+LTRIM(STR(DATEPART(year, GETDATE()))) AS JUDUL
					,0 AS AMOUNT
					,0 AS AMOUNT_SUM
			UNION ALL
			SELECT	'A' AS URUTAN_GROUP
					,'A2' AS URUTAN
					,'POTENSI '+LTRIM(STR(DATEPART(year, GETDATE()))) AS JUDUL
					,0 AS AMOUNT
					,0 AS AMOUNT_SUM
			UNION ALL
			SELECT	'B' AS URUTAN_GROUP
					,'B1' AS URUTAN
					,'TARGET' AS JUDUL
					,0 AS AMOUNT
					,0 AS AMOUNT_SUM
			UNION ALL
			SELECT	'A' AS URUTAN_GROUP
					,'A1' AS URUTAN
					,'REALISASI '+LTRIM(STR(XX.REAL_YEAR)) AS JUDUL
					,SUM(XX.AMOUNT_IDR) AS AMOUNT
					,SUM(XX.AMOUNT_IDR) AS AMOUNT_SUM
			FROM	(
						SELECT
								'AJ' AS COMPANY
								, POS.SALES_CODE
								, DATEPART(year, POS.ORDER_DATE) AS REAL_YEAR
								, POS.ORDER_DATE
								, POS.AMOUNT_IDR
								, POS.NO_ITEM
								, POS.ITEM_CATEGORY
								, POS.DIM_PRINCIPAL
								, POS.HW_PS
						FROM	(
									SELECT
											SH.[Salesperson Code] AS SALES_CODE
											, SH.[Order Date] AS ORDER_DATE
											, CASE WHEN SH.[Currency Code] <> '' THEN ROUND(SL.AMOUNT / SH.[Currency Factor],0) ELSE SL.AMOUNT END AS AMOUNT_IDR
											, SL.NO_ITEM
											, SL.ITEM_CATEGORY
											, SL.DIM_PRINCIPAL
											, SUBSTRING(SL.ITEM_CATEGORY , 1,2) AS HW_PS
									FROM [dbo].[BC_AUTOJAYA$Sales Header] SH
									INNER JOIN  (
													SELECT SLL.[Document No_] AS NO_SO
															,SLL.[No_] AS NO_ITEM
															,SLL.[Item Category Code] AS ITEM_CATEGORY
															,DIMD.DIM_PRINCIPAL
															,SUM(SLL.[Amount]) AS AMOUNT
													FROM [dbo].[BC_AUTOJAYA$Sales Line] SLL
													LEFT JOIN	(
																	SELECT X.[Dimension Set ID]
																		  ,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_PRINCIPAL
																	FROM [dbo].[BC_AUTOJAYA$Dimension Set Entry] X
																	GROUP BY [Dimension Set ID]
																) DIMD ON DIMD.[Dimension Set ID] = SLL.[Dimension Set ID]
													WHERE SLL.[Document Type] = 1 AND
														  SLL.[Type] = 2
													GROUP BY SLL.[Document No_], SLL.[No_], SLL.[Item Category Code], DIMD.DIM_PRINCIPAL
												)SL ON SL.NO_SO = SH.[No_]
									WHERE SH.[Document Type] = 1 AND SH.[Status] IN (1, 3) AND
										  SH.[Bill-to Customer No_] NOT IN ('AUJA001' , 'AUJA002', 'SOPE001')
									UNION ALL
									SELECT	X.SALES_CODE
											, X.ORDER_DATE
											, X.AMOUNT_IDR
											, X.NO_ITEM
											, X.ITEM_CATEGORY
											, X.DIM_PRINCIPAL
											, X.HW_PS
									FROM	(
												SELECT	SIH.[Salesperson Code] AS SALES_CODE
														, SIH.[Order Date] AS ORDER_DATE
														, CASE WHEN SUBSTRING(SIH.[No_], 1, 2) = 'UM' THEN  SIH.[Prepayment Order No_] ELSE SIH.[Order No_] END AS NO_SO
														, CASE WHEN SIH.[Currency Code] <> '' THEN ROUND(SIL.AMOUNT / SIH.[Currency Factor],0) ELSE SIL.AMOUNT END AS AMOUNT_IDR
														, SIL.NO_ITEM
														, SIL.ITEM_CATEGORY
														, SIL.DIM_PRINCIPAL
														, SUBSTRING(SIL.ITEM_CATEGORY , 1,2) AS HW_PS
												FROM [dbo].[BC_AUTOJAYA$Sales Invoice Header] SIH
												INNER JOIN  (
																SELECT SLL.[Document No_]
																		,SLL.[No_] AS NO_ITEM
																		,SLL.[Item Category Code] AS ITEM_CATEGORY
																		,DIMD.DIM_PRINCIPAL
																		,SUM([Amount]) AS AMOUNT
																FROM [dbo].[BC_AUTOJAYA$Sales Invoice Line] SLL
																LEFT JOIN	(
																				SELECT X.[Dimension Set ID]
																					  ,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_PRINCIPAL
																				FROM [dbo].[BC_AUTOJAYA$Dimension Set Entry] X
																				GROUP BY [Dimension Set ID]
																			) DIMD ON DIMD.[Dimension Set ID] = SLL.[Dimension Set ID]
																WHERE SLL.[Type] = 2 AND SLL.[Quantity] <> 0
																GROUP BY SLL.[Document No_], SLL.[No_], SLL.[Item Category Code], DIMD.DIM_PRINCIPAL
															) SIL ON SIL.[Document No_] = SIH.[No_]
												LEFT JOIN [dbo].[BC_AUTOJAYA$Sales Cr_Memo Header] CRM ON CRM.[Applies-to Doc_ No_] = SIH.[No_]
												WHERE CRM.[No_] IS NULL AND
													  SIH.[Bill-to Customer No_] NOT IN ('AUJA001' , 'AUJA002', 'SOPE001')
											) X
									LEFT JOIN [dbo].[BC_AUTOJAYA$Sales Header] SOO ON SOO.[No_] = X.NO_SO
									WHERE SOO.[No_] IS NULL
								) POS
						UNION ALL
						SELECT
								'SP' AS COMPANY
								, POS.SALES_CODE
								, DATEPART(year, POS.ORDER_DATE) AS REAL_YEAR
								, POS.ORDER_DATE
								, POS.AMOUNT_IDR
								, POS.NO_ITEM
								, POS.ITEM_CATEGORY
								, POS.DIM_PRINCIPAL
								, POS.HW_PS
						FROM	(
									SELECT
											SH.[Salesperson Code] AS SALES_CODE
											, SH.[Order Date] AS ORDER_DATE
											, CASE WHEN SH.[Currency Code] <> '' THEN ROUND(SL.AMOUNT / SH.[Currency Factor],0) ELSE SL.AMOUNT END AS AMOUNT_IDR
											, SL.NO_ITEM
											, SL.ITEM_CATEGORY
											, SL.DIM_PRINCIPAL
											, SUBSTRING(SL.ITEM_CATEGORY , 1,2) AS HW_PS
									FROM [dbo].[BC_SOLUSI$Sales Header] SH
									INNER JOIN  (
													SELECT SLL.[Document No_] AS NO_SO
															,SLL.[No_] AS NO_ITEM
															,SLL.[Item Category Code] AS ITEM_CATEGORY
															,DIMD.DIM_PRINCIPAL
															,SUM(SLL.[Amount]) AS AMOUNT
													FROM [dbo].[BC_SOLUSI$Sales Line] SLL
													LEFT JOIN	(
																	SELECT X.[Dimension Set ID]
																		  ,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_PRINCIPAL
																	FROM [dbo].[BC_SOLUSI$Dimension Set Entry] X
																	GROUP BY [Dimension Set ID]
																) DIMD ON DIMD.[Dimension Set ID] = SLL.[Dimension Set ID]
													WHERE SLL.[Document Type] = 1 AND
														  SLL.[Type] = 2
													GROUP BY SLL.[Document No_], SLL.[No_], SLL.[Item Category Code], DIMD.DIM_PRINCIPAL
												)SL ON SL.NO_SO = SH.[No_]
									WHERE SH.[Document Type] = 1 AND SH.[Status] IN (1, 3) AND
										  SH.[Bill-to Customer No_] NOT IN ('AUJA001' , 'AUJA002', 'SOPE001')
									UNION ALL
									SELECT	X.SALES_CODE
											, X.ORDER_DATE
											, X.AMOUNT_IDR
											, X.NO_ITEM
											, X.ITEM_CATEGORY
											, X.DIM_PRINCIPAL
											, X.HW_PS
									FROM	(
												SELECT	SIH.[Salesperson Code] AS SALES_CODE
														, SIH.[Order Date] AS ORDER_DATE
														, CASE WHEN SUBSTRING(SIH.[No_], 1, 2) = 'UM' THEN  SIH.[Prepayment Order No_] ELSE SIH.[Order No_] END AS NO_SO
														, CASE WHEN SIH.[Currency Code] <> '' THEN ROUND(SIL.AMOUNT / SIH.[Currency Factor],0) ELSE SIL.AMOUNT END AS AMOUNT_IDR
														, SIL.NO_ITEM
														, SIL.ITEM_CATEGORY
														, SIL.DIM_PRINCIPAL
														, SUBSTRING(SIL.ITEM_CATEGORY , 1,2) AS HW_PS
												FROM [dbo].[BC_SOLUSI$Sales Invoice Header] SIH
												INNER JOIN  (
																SELECT SLL.[Document No_]
																		,SLL.[No_] AS NO_ITEM
																		,SLL.[Item Category Code] AS ITEM_CATEGORY
																		,DIMD.DIM_PRINCIPAL
																		,SUM([Amount]) AS AMOUNT
																FROM [dbo].[BC_SOLUSI$Sales Invoice Line] SLL
																LEFT JOIN	(
																				SELECT X.[Dimension Set ID]
																					  ,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_PRINCIPAL
																				FROM [dbo].[BC_SOLUSI$Dimension Set Entry] X
																				GROUP BY [Dimension Set ID]
																			) DIMD ON DIMD.[Dimension Set ID] = SLL.[Dimension Set ID]
																WHERE SLL.[Type] = 2 AND SLL.[Quantity] <> 0
																GROUP BY SLL.[Document No_], SLL.[No_], SLL.[Item Category Code], DIMD.DIM_PRINCIPAL
															) SIL ON SIL.[Document No_] = SIH.[No_]
												LEFT JOIN [dbo].[BC_SOLUSI$Sales Cr_Memo Header] CRM ON CRM.[Applies-to Doc_ No_] = SIH.[No_]
												WHERE CRM.[No_] IS NULL AND
													  SIH.[Bill-to Customer No_] NOT IN ('AUJA001' , 'AUJA002', 'SOPE001')
													  AND SIH.[No_] NOT IN ('SIST180500','SIST171393','SIST171295','SIST171294','SIST171292','SIST170994','SIST160478')
											) X
									LEFT JOIN [dbo].[BC_SOLUSI$Sales Header] SOO ON SOO.[No_] = X.NO_SO
									WHERE SOO.[No_] IS NULL
								) POS
					) XX
			LEFT JOIN [dbo].[BC_AUTOJAYA$Salesperson_Purchaser] SLP ON SLP.[Code] = XX.SALES_CODE
			LEFT JOIN [dbo].[BC_AUTOJAYA$Responsibility Center] CAB ON CAB.[Code] = SLP.[Global Dimension 1 Code]
			WHERE	XX.REAL_YEAR = DATEPART(year, GETDATE()) AND
					XX.SALES_CODE <> '' AND
					( ($P{ItemCategory} IN ('HW', 'PS') AND XX.HW_PS = $P{ItemCategory}) OR
					  ($P{ItemCategory} IN ('PS01', 'PS02', 'PS03', 'PS04', 'PS05') AND XX.ITEM_CATEGORY= $P{ItemCategory}) OR
					  (XX.NO_ITEM = $P{ItemCategory}) OR
					  ($P{ItemCategory} = 'ALL')
					) AND
					(XX.COMPANY = $P{Company} OR $P{Company} = 'ALL') AND
					(XX.SALES_CODE IN (
						$P{Sales1}, $P{Sales2}, $P{Sales3}, $P{Sales4}, $P{Sales5}, $P{Sales6}, $P{Sales7}, $P{Sales8}, $P{Sales9}, $P{Sales10},
						$P{Sales11}, $P{Sales12}, $P{Sales13}, $P{Sales14}, $P{Sales15}, $P{Sales16}, $P{Sales17}, $P{Sales18}, $P{Sales19}, $P{Sales20},
						$P{Sales21}, $P{Sales22}, $P{Sales23}, $P{Sales24}, $P{Sales25}, $P{Sales26}, $P{Sales27}, $P{Sales28}, $P{Sales29}, $P{Sales30},
						$P{Sales31}, $P{Sales32}, $P{Sales33}, $P{Sales34}, $P{Sales35}, $P{Sales36}, $P{Sales37}, $P{Sales38}, $P{Sales39}, $P{Sales40},
						$P{Sales41}, $P{Sales42}, $P{Sales43}, $P{Sales44}, $P{Sales45}, $P{Sales46}, $P{Sales47}, $P{Sales48}, $P{Sales49}, $P{Sales50}
					) OR $P{Sales} = 'ALL') AND
					(CAB.[Name] = $P{Cabang} OR $P{Cabang} = 'ALL') AND
					(XX.DIM_PRINCIPAL = $P{Principal} OR  $P{Principal} = 'ALL')
			GROUP BY XX.REAL_YEAR
			UNION ALL
			SELECT 'A' AS URUTAN_GROUP
					,'A2' AS URUTAN
					,'POTENSI '+LTRIM(STR(X.EST_YEAR)) AS JUDUL
					,SUM(X.AMOUNT) AS AMOUNT
					,SUM(X.AMOUNT) AS AMOUNT_SUM
			FROM	(
						SELECT	MAD.COMPANY
								,MAD.SALES
								,MAD.SIZE_PROJECT
								,MAD.POTENSIAL_PROJECT
								,MAD.ITEM
								,MAD.ITEM_CAT
								,MAD.HW_PS
								,(MAD.UNIT_PRICE * MAD.QTY_OUT) AS AMOUNT
								,CASE WHEN MAD.EST_YEAR < DATEPART(year, GETDATE()) THEN DATEPART(year, GETDATE()) ELSE MAD.EST_YEAR END AS EST_YEAR
								,MAD.DIM_PRINCIPAL
								,MAD.DIM_APPLICATION
						FROM	(
									SELECT	CASE WHEN SOH.[No_ Series] = 'SBOM' THEN 'AJ' ELSE 'SP' END AS COMPANY
											,SOH.[Salesperson Code] AS SALES
											,CASE WHEN SOH.[External Document No_] = '' THEN
												SOH.[Sell-to Customer Name]
												ELSE
												SOH.[Sell-to Customer Name]+' - '+ SOH.[External Document No_]
												END AS CUSTOMER
											,SOH.[No_] AS NO_BSO
											,SOH.[Posting Description] AS POS_DES
											,	CASE WHEN SOL.[Warranty Code] = '' THEN
													CASE WHEN SUBSTRING(SOH.[Posting Description], 1,1) NOT IN ('L','M','H','A') THEN
														'L'
													ELSE
														SUBSTRING(SOH.[Posting Description], 1,1)
													END
												ELSE
													CASE WHEN SOL.[Warranty Code] = 'CLOSED' THEN 'H'
													ELSE
														CASE WHEN SUBSTRING(SOH.[Posting Description], 1,1) NOT IN ('L','M','H','A') THEN
															'L'
														ELSE
															SUBSTRING(SOH.[Posting Description], 1,1)
														END
													END
												END AS SIZE_PROJECT
											, CASE WHEN SUBSTRING(SOH.[Posting Description], 2,1) NOT IN ('1','0') THEN '0' ELSE SUBSTRING(SOH.[Posting Description], 2,1) END AS POTENSIAL_PROJECT
											,DIMH.DIM_SECTOR
											,DIMH.DIM_SECTOR_NAME
											,DIMH.DIM_APPLICATION
											,DIMH.DIM_APPLICATION_NAME
											,DIMD.DIM_PRINCIPAL
											,DIMD.DIM_PRINCIPAL_NAME
											,SOL.[No_] AS ITEM
											,SOL.[Description] AS ITEM_DESC
											,SOL.[Shortcut Dimension 2 Code] AS ITEM_CAT
											,SUBSTRING(SOL.[Shortcut Dimension 2 Code] , 1,2) AS HW_PS
											,SOL.[Quantity] AS QTY_OUT
											,SOL.[Unit Price] AS UNIT_PRICE
											,DATEPART(quarter, GETDATE())  AS TODAY_Q
											,DATEPART(month, GETDATE()) AS TODAY_MON
											,DATEPART(year, GETDATE()) AS TODAY_YEAR
											,DATEPART(quarter, SOL.[Shipment Date]) AS EST_Q
											,DATEPART(month, SOL.[Shipment Date]) AS EST_MON
											,DATEPART(year, SOL.[Shipment Date]) AS EST_YEAR
											,CCM.COMMENT
									FROM [dbo].[BC_AUTOJAYA$Sales Header] SOH
									LEFT JOIN	(
													SELECT	CMN.[Document Type]
															, CMN.[No_]
															, MAX(CMN.COMMENT) AS COMMENT
													FROM	(
																SELECT	SCL.[Document Type]
																		,SCL.[No_]
																		,(
																			SELECT CL.[Comment] + ' ' as 'data()'
																			FROM [dbo].[BC_AUTOJAYA$Sales Comment Line] CL
																			WHERE	CL.[Document Type] = SCL.[Document Type] AND
																					CL.[No_] = SCL.[No_]
																			for xml path('')
																			) AS COMMENT
																FROM [dbo].[BC_AUTOJAYA$Sales Comment Line] SCL
															) CMN
													GROUP BY CMN.[Document Type], CMN.[No_]
												) CCM ON CCM.[Document Type] = SOH.[Document Type]  AND CCM.[No_] = SOH.[No_]
									INNER JOIN [dbo].[BC_AUTOJAYA$Sales Line] SOL ON SOL.[Document Type] = SOH.[Document Type] AND SOL.[Document No_] = SOH.[No_]
									LEFT JOIN	(
													SELECT X.[Dimension Set ID]
															,MAX(CASE WHEN X.[Dimension Code] = 'SECTOR' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_SECTOR
															,MAX(CASE WHEN X.[Dimension Code] = 'APPLICATION' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_APPLICATION
															,MAX(CASE WHEN X.[Dimension Code] = 'SECTOR' THEN Y.[Name] ELSE NULL END) AS DIM_SECTOR_NAME
															,MAX(CASE WHEN X.[Dimension Code] = 'APPLICATION' THEN Y.[Name] ELSE NULL END) AS DIM_APPLICATION_NAME
													FROM [dbo].[BC_AUTOJAYA$Dimension Set Entry] X
													LEFT JOIN [dbo].[BC_AUTOJAYA$Dimension Value] Y ON X.[Dimension Code] = Y.[Dimension Code] AND X.[Dimension Value Code] = Y.[Code]
													GROUP BY [Dimension Set ID]
												) DIMH ON DIMH.[Dimension Set ID] = SOH.[Dimension Set ID]
									LEFT JOIN	(
													SELECT X.[Dimension Set ID]
															,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN X.[Dimension Value Code] ELSE NULL END) AS DIM_PRINCIPAL
															,MAX(CASE WHEN X.[Dimension Code] = 'PRINCIPAL' THEN Y.[Name] ELSE NULL END) AS DIM_PRINCIPAL_NAME
													FROM [dbo].[BC_AUTOJAYA$Dimension Set Entry] X
													LEFT JOIN [dbo].[BC_AUTOJAYA$Dimension Value] Y ON X.[Dimension Code] = Y.[Dimension Code] AND X.[Dimension Value Code] = Y.[Code]
													GROUP BY [Dimension Set ID]
												) DIMD ON DIMD.[Dimension Set ID] = SOL.[Dimension Set ID]
									WHERE SOH.[No_ Series] IN ('SBOM', 'SBOMS')
								) MAD
					) X
			LEFT JOIN [dbo].[BC_AUTOJAYA$Salesperson_Purchaser] SLP ON SLP.[Code] = X.SALES
			LEFT JOIN [dbo].[BC_AUTOJAYA$Responsibility Center] CAB ON CAB.[Code] = SLP.[Global Dimension 1 Code]
			WHERE 	X.EST_YEAR = DATEPART(year, GETDATE()) AND
					(	X.SIZE_PROJECT IN ( $P{Size1}, $P{Size2}, $P{Size3}, $P{Size4} ) OR
						$P{Size} = 'ALL'
					) AND
					(X.POTENSIAL_PROJECT = $P{Potensi} OR $P{Potensi} = 'ALL') AND
					( ($P{ItemCategory} IN ('HW', 'PS') AND X.HW_PS = $P{ItemCategory}) OR
					  ($P{ItemCategory} IN ('PS01', 'PS02', 'PS03', 'PS04', 'PS05') AND X.ITEM_CAT= $P{ItemCategory}) OR
					  (X.ITEM = $P{ItemCategory}) OR
					  ($P{ItemCategory} = 'ALL')
					) AND
					(X.COMPANY = $P{Company} OR $P{Company} = 'ALL') AND
					(X.SALES IN (
									$P{Sales1}, $P{Sales2}, $P{Sales3}, $P{Sales4}, $P{Sales5}, $P{Sales6}, $P{Sales7}, $P{Sales8}, $P{Sales9}, $P{Sales10},
									$P{Sales11}, $P{Sales12}, $P{Sales13}, $P{Sales14}, $P{Sales15}, $P{Sales16}, $P{Sales17}, $P{Sales18}, $P{Sales19}, $P{Sales20},
									$P{Sales21}, $P{Sales22}, $P{Sales23}, $P{Sales24}, $P{Sales25}, $P{Sales26}, $P{Sales27}, $P{Sales28}, $P{Sales29}, $P{Sales30},
									$P{Sales31}, $P{Sales32}, $P{Sales33}, $P{Sales34}, $P{Sales35}, $P{Sales36}, $P{Sales37}, $P{Sales38}, $P{Sales39}, $P{Sales40},
									$P{Sales41}, $P{Sales42}, $P{Sales43}, $P{Sales44}, $P{Sales45}, $P{Sales46}, $P{Sales47}, $P{Sales48}, $P{Sales49}, $P{Sales50}
								) OR $P{Sales} = 'ALL') AND
					(CAB.[Name] = $P{Cabang} OR $P{Cabang} = 'ALL') AND
					(X.DIM_PRINCIPAL = $P{Principal} OR  $P{Principal} = 'ALL') AND
					(X.DIM_APPLICATION = $P{App} OR  $P{App} = 'ALL' )
			GROUP BY X.EST_YEAR
			UNION ALL
			SELECT	'B' AS URUTAN_GROUP
					,'B1' AS URUTAN
					,'TARGET' AS JUDUL
					, M06.[TARGET] AS AMOUNT
					, (M06.[TARGET] * -1) AS AMOUNT_SUM
			FROM [dbo].[M06_TARGET_PIPELINE] M06
			LEFT JOIN [dbo].[BC_AUTOJAYA$Salesperson_Purchaser] SLS ON SLS.[Code] = M06.SLS_OR_CAB
			LEFT JOIN [dbo].[BC_AUTOJAYA$Responsibility Center] CAB ON CAB.[Code] = SLS.[Global Dimension 1 Code]
			WHERE	M06.[STATUS] = 'ACTIVE' AND
					M06.JENIS = 'SALES' AND
					M06.TAHUN = DATEPART(year, GETDATE()) AND
					(M06.SLS_OR_CAB IN (
						$P{Sales1}, $P{Sales2}, $P{Sales3}, $P{Sales4}, $P{Sales5}, $P{Sales6}, $P{Sales7}, $P{Sales8}, $P{Sales9}, $P{Sales10},
						$P{Sales11}, $P{Sales12}, $P{Sales13}, $P{Sales14}, $P{Sales15}, $P{Sales16}, $P{Sales17}, $P{Sales18}, $P{Sales19}, $P{Sales20},
						$P{Sales21}, $P{Sales22}, $P{Sales23}, $P{Sales24}, $P{Sales25}, $P{Sales26}, $P{Sales27}, $P{Sales28}, $P{Sales29}, $P{Sales30},
						$P{Sales31}, $P{Sales32}, $P{Sales33}, $P{Sales34}, $P{Sales35}, $P{Sales36}, $P{Sales37}, $P{Sales38}, $P{Sales39}, $P{Sales40},
						$P{Sales41}, $P{Sales42}, $P{Sales43}, $P{Sales44}, $P{Sales45}, $P{Sales46}, $P{Sales47}, $P{Sales48}, $P{Sales49}, $P{Sales50}
					) OR $P{Sales} = 'ALL') AND
					(CAB.[Name] = $P{Cabang} OR $P{Cabang} = 'ALL')
		) XXX
GROUP BY XXX.URUTAN_GROUP
		,XXX.URUTAN
		,XXX.JUDUL]]>
	</queryString>
	<field name="URUTAN_GROUP" class="java.lang.String"/>
	<field name="URUTAN" class="java.lang.String"/>
	<field name="JUDUL" class="java.lang.String"/>
	<field name="AMOUNT" class="java.math.BigDecimal"/>
	<field name="AMOUNT_SUM" class="java.math.BigDecimal"/>
	<sortField name="URUTAN_GROUP"/>
	<sortField name="URUTAN"/>
	<variable name="AMOUNT_1" class="java.math.BigDecimal" resetType="Group" resetGroup="Group" calculation="Sum">
		<variableExpression><![CDATA[$F{AMOUNT}]]></variableExpression>
	</variable>
	<variable name="AMOUNT_SUM_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{AMOUNT_SUM}]]></variableExpression>
	</variable>
	<group name="Group">
		<groupExpression><![CDATA[$F{URUTAN_GROUP}]]></groupExpression>
		<groupFooter>
			<band height="14">
				<printWhenExpression><![CDATA[$F{URUTAN_GROUP}.equals( "A" )]]></printWhenExpression>
				<textField isStretchWithOverflow="true" pattern="#,###" isBlankWhenNull="true">
					<reportElement x="385" y="0" width="75" height="14" uuid="9fa4cd01-9a72-448e-87f9-e6a5f094af9b"/>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{AMOUNT_1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="0" width="75" height="14" uuid="9e1a3eea-cb03-4312-91ff-8dca337cb2e1"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[]]></text>
				</staticText>
				<staticText>
					<reportElement x="75" y="0" width="310" height="14" uuid="9e932453-5ed1-4b61-8ab3-a3f3216edae8"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[TOTAL]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<title>
		<band height="28">
			<staticText>
				<reportElement x="0" y="14" width="75" height="14" uuid="3b1dda54-3d20-4e5c-a392-d11d7513be7b"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="14" width="310" height="14" uuid="3d6fad4b-db01-412b-b981-44b9f5590c06"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="75" height="14" uuid="6981c1dc-ac95-4664-93d2-5b10d88ae1d8"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="0" width="310" height="14" uuid="a7d159fe-06c6-406f-b8a6-f76bd1a8fe20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[SUMMARY (REALISASI + POTENSI) VS TARGET]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="14">
			<textField>
				<reportElement x="75" y="0" width="310" height="14" uuid="5b8efd21-b7a8-423d-a0af-e3717fbee3e0"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{JUDUL}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,###" isBlankWhenNull="true">
				<reportElement x="385" y="0" width="75" height="14" uuid="f715ba84-d35b-48b0-aa1f-c16a226cdf2d"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{AMOUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="28">
			<staticText>
				<reportElement x="0" y="0" width="75" height="14" uuid="25d313a7-790b-4cbb-b841-66865c685357"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="0" width="310" height="14" uuid="7227fb3e-fcbe-481b-875e-3844e2a062d8"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[OVER/(DEFICIT)]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="#,###; (#,###)" isBlankWhenNull="true">
				<reportElement x="385" y="0" width="75" height="14" uuid="aeaecfda-6904-4e4e-a440-3795e1d480bb"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{AMOUNT_SUM_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="14" width="75" height="14" uuid="166698c4-865d-45ce-983f-5f900b098f8b"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="14" width="310" height="14" uuid="a33a1215-8de4-49e7-800d-32644325a1d9"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
