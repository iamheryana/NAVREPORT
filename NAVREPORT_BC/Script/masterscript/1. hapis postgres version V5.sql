--*** CROSS MODULE : (PAYROLL & HRD) ***
-- harus pakai postgres 
--CREATE DATABASE myhapis
--  WITH OWNER = hapis
--; 

-- LDA-1
 CREATE TABLE FZ1FLDA(
	Kode VARCHAR(2) NOT NULL,
	NamaPR VARCHAR(40) ,
	AdrsPR VARCHAR(40) ,
	KotaPR VARCHAR(25) ,
	NPWPPR VARCHAR(20) ,
	CURRPD DATE,
	NEXTPD DATE,
	IMPLPD DATE,
	TgFound DATE,
	ServAwd DATE,
	FlgPost VARCHAR(1) ,
	PostDate DATE,
	Payroll VARCHAR(1) ,
	Personalia VARCHAR(1) ,
	Pajak VARCHAR(1) ,
	IntvPajak NUMERIC(9,0) ,
	SPT VARCHAR(1) ,
	HitPjk VARCHAR(1) ,
	LimPjk1 DECIMAL(15,2) ,
	Pjk1 DECIMAL(5,2) ,
	LimPjk2 DECIMAL(15,2) ,
	Pjk2 DECIMAL(5,2) ,
	LimPjk3 DECIMAL(15,2) ,
	Pjk3 DECIMAL(5,2) ,
	NlOccSupp DECIMAL(15,2) ,
	PrOccSupp DECIMAL(5,2) ,
	PTKPPay DECIMAL(15,2) ,
	PTKPDep DECIMAL(15,2) ,
	RndTax DECIMAL(3,0) ,
	NPP VARCHAR(8) ,
	RetAge INT ,
	KdDHT VARCHAR(4) ,
	IurPgwi DECIMAL(5,2) ,
	IurPers DECIMAL(5,2) ,
	Bunga DECIMAL(5,2) ,
	JKK VARCHAR(1) ,
	JHT VARCHAR(1) ,
	JKM VARCHAR(1) ,
	JPK VARCHAR(1) ,
	HariAstek INT ,
	FlgLemb VARCHAR(1) ,
	JmlLemb DECIMAL(3,0) ,
	LimWrk1 INT ,
	RateWrk1 DECIMAL(5,2) ,
	RateWrk2 DECIMAL(5,2) ,
	LimLbr1 INT ,
	LimLbr2 INT ,
	RateLbr1 DECIMAL(5,2) ,
	RateLbr2 DECIMAL(5,2) ,
	RateLbr3 DECIMAL(5,2) ,
	RteLbr1 INT ,
	RteLbr2 INT ,
	Pembilang DECIMAL(3,0) ,
	Penyebut DECIMAL(3,0) ,
	PembilangH DECIMAL(3,0) ,
	PenyebutH DECIMAL(3,0) ,
	PersentasiLembur DECIMAL(5,2) ,
	FlgGGol VARCHAR(1) ,
	TunjIst DECIMAL(5,2) ,
	TunjAnk DECIMAL(5,2) ,
	FlgGlng VARCHAR(1) ,
	FlgKJab VARCHAR(1) ,
	FlgJaba VARCHAR(1) ,
	FlgCaba VARCHAR(1) ,
	FlgPiut VARCHAR(1) ,
	TglTHRL DATE,
	TglHakL DATE,
	TglTHRN DATE,
	TglHakN DATE,
	JumlahMangkir INT ,
	RndPen DECIMAL(3,0) ,
	FlgTHR VARCHAR(1) ,
	IuranSPSI DECIMAL(5,2) ,
	Hari01 INT ,
	Hari02 INT ,
	Hari03 INT ,
	Hari04 INT ,
	Hari05 INT ,
	Hari06 INT ,
	Hari07 INT ,
	Hari08 INT ,
	Hari09 INT ,
	Hari10 INT ,
	Hari11 INT ,
	Hari12 INT ,
	HariKerja DECIMAL(4,0) ,
	SavePayrol INT ,
	SaveHRD INT ,
	VarRound VARCHAR(1) ,
	MToleransiCuti INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	MaxBruto DECIMAL(15,2),
	PendDP   DECIMAL(15,2),
	NlTunjIst   DECIMAL(15,2) ,
	NlTunjAnak   DECIMAL(15,2) ,
	LimLIst1 INT ,
	RateLIst1 DECIMAL(5,2) ,
	RateLIst2 DECIMAL(5,2) ,
	KdCutiHaid VARCHAR(4) ,
	KdSakitSrtDr VARCHAR(4) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
	CONSTRAINT KEYFZ1 PRIMARY KEY (KODE)) ;

-- 'Y'=Ya, 'T'=Tidak
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1Payroll CHECK(Payroll IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1Personalia CHECK(Personalia IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1Pajak CHECK(Pajak IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1SPT CHECK(SPT IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1JKK CHECK(JKK IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1JHT CHECK(JHT IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1JKM CHECK(JKM IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1JPK CHECK(JPK IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgLemb CHECK(FlgLemb IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgGGol CHECK(FlgGGol IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgGlng CHECK(FlgGlng IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgKJab CHECK(FlgKJab IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgJaba CHECK(FlgJaba IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgCaba CHECK(FlgCaba IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgPiut CHECK(FlgPiut IN ('Y', 'T'));
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1FlgTHR CHECK(FlgTHR IN ('Y', 'T'));
-- '1' = 1(Satuan), '2' = 10 (Puluhan), '3' = 100 (Ratusan), '4' = 1000 (Ribuan)
ALTER TABLE FZ1FLDA
ADD CONSTRAINT C_FZ1VarRound CHECK(VarRound IN ('1', '2', '3', '4'));

ALTER TABLE  FZ1FLDA
ALTER COLUMN IntvPajak SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimPjk1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Pjk1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimPjk2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Pjk2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimPjk3 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Pjk3 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN NlOccSupp SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PrOccSupp SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PTKPPay SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PTKPDep SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RndTax SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RetAge SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN IurPgwi SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN IurPers SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Bunga SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN HariAstek SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN JmlLemb SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimWrk1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateWrk1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateWrk2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimLbr1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimLbr2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateLbr1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateLbr2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateLbr3 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RteLbr1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RteLbr2 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Pembilang SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Penyebut SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PembilangH SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PenyebutH SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN PersentasiLembur SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN TunjIst SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN TunjAnk SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN JumlahMangkir SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RndPen SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN IuranSPSI SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari01 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari02 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari03 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari04 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari05 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari06 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari07 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari08 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari09 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari10 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari11 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN Hari12 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN HariKerja SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN SavePayrol SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN SaveHRD SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN MToleransiCuti SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN NlTunjIst SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN NlTunjAnak SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN LimLIst1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateLIst1 SET DEFAULT 0 ;
ALTER TABLE  FZ1FLDA
ALTER COLUMN RateLIst2 SET DEFAULT 0 ;


-- LDA-2
CREATE TABLE FZ2FLDA(
	Kode VARCHAR(2) NOT NULL,
	StringFlag VARCHAR(20) ,
	NamaBank VARCHAR(40) ,
	NoAccount VARCHAR(32) ,
	Cabang VARCHAR(20) ,
	KotaBank VARCHAR(25) ,
	NoRekening VARCHAR(20) ,
	NamaAccHolder VARCHAR(30) ,
	AlamatAccHolder VARCHAR(40) ,
	Kota VARCHAR(25) ,
	TTD VARCHAR(30) ,
	FlagRapel INT ,
	FlRapelTHR INT ,
	PeriodeRapel DATE,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	TglMulaiPolis DATE,
	TglAkhirPolis DATE,
	ServerAttendance VARCHAR(32) ,
	UmurAnakMax INT , 
	UmurIstriMax INT , 
	JmlHariSethn decimal(3,0) , 
	ServerGL VARCHAR(32) ,
	DbaseGL VARCHAR(33) ,
	FaktorXPajak DECIMAL(6,2) , 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
  CONSTRAINT FZ2Key1 PRIMARY KEY (KODE)) ;

ALTER TABLE FZ2FLDA
ALTER COLUMN FlagRapel SET DEFAULT 0 ;
ALTER TABLE FZ2FLDA
ALTER COLUMN FlRapelTHR SET DEFAULT 0 ;
ALTER TABLE FZ2FLDA
ALTER COLUMN FaktorXPajak SET DEFAULT 100 ;


-- CURRENCY/VALUTA
CREATE TABLE M40CURR(
	KDCURR VARCHAR(4) NOT NULL,
	KTCURR VARCHAR(25) ,
	SKCURR VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
	CONSTRAINT M40Key1 PRIMARY KEY (KDCURR)) ;

-- KURS
CREATE TABLE M49KURS(
	M49_ID SERIAL, 
	KDCURR VARCHAR(4) NOT NULL,
	PERIODE DATE NOT NULL,
	KURS DECIMAL(10,2) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
	CONSTRAINT M49Key1 PRIMARY KEY (M49_ID)) ;
   
   create INDEX M49Key2 ON M49KURS(KDCURR) ;
   CREATE UNIQUE INDEX M49UK1 ON M49KURS (KDCURR,PERIODE) ;
   
ALTER TABLE M49KURS
ALTER COLUMN KURS SET DEFAULT 0 ;

ALTER TABLE M49KURS ADD
   CONSTRAINT M49Key2 FOREIGN KEY (KDCURR)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT  ;

-- UMR (UPAH MINIMUM REGIONAL)
CREATE TABLE M21UMRE(
	Daerah VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	UMR DECIMAL(15,2) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	TglMulai DATE NOT NULL,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M21Key1 PRIMARY KEY (Daerah,TglMulai)) ;
   create INDEX M21Key2 ON M21UMRE(Daerah) ; 

ALTER TABLE M21UMRE
ALTER COLUMN UMR SET DEFAULT 0 ;

-- AREA
CREATE TABLE M01AREA(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	UMR VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M01Key1 PRIMARY KEY (Kode));
   
   create INDEX M01Key2 ON M01AREA(UMR) ;
   
-- UNIT USAHA
CREATE TABLE M02UUSA(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	NPWP VARCHAR(20) ,
	Kelompok VARCHAR(1) ,
	NoAccount VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M02Key1 PRIMARY KEY (Kode)) ;

-- Kelompok JKK 
ALTER TABLE M02UUSA
ADD CONSTRAINT C_M02Kelompok CHECK(Kelompok IN ('1', '2', '3', '4', '5'));

-- JABATAN (HEADER)
CREATE TABLE M04HJAB(
	M04_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	KdKJab VARCHAR(4) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	FlgStruk VARCHAR(1) ,
	M06_ID INTEGER,
	TglSuspend      DATE NOT NULL, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M04Key1 PRIMARY KEY (M04_ID));

   CREATE UNIQUE INDEX M04UK1 ON M04HJAB (Kode) ;

ALTER TABLE M04HJAB
ALTER COLUMN Recs SET DEFAULT 0 ;
--
ALTER TABLE M04HJAB
ADD CONSTRAINT C_M02FlgStruk CHECK(FlgStruk IN ('Y', 'T')) ;

-- JABATAN (DETAIL) 
CREATE TABLE M05DJAB(
	M05_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Trans VARCHAR(1) ,
	M04_ID INTEGER,
	M03_ID INTEGER,   
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M05Key1 PRIMARY KEY (M05_ID)) ;

   CREATE UNIQUE INDEX M05UK1 ON M05DJAB (Kode,FlgDpPt,KdDpPt) ;
   
create INDEX M05Key2 ON M05DJAB(M04_ID) ;
create INDEX M05Key3 ON M05DJAB(M03_ID) ;
create INDEX M05Key4 ON M05DJAB(KdCurr) ;

ALTER TABLE M05DJAB
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE M05DJAB
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE M05DJAB
ALTER COLUMN Trans SET DEFAULT 'T' ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M05DJAB
ADD CONSTRAINT C_M05FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE M05DJAB
ADD CONSTRAINT C_M05Trans CHECK(Trans IN ('Y', 'T')) ;

ALTER TABLE M05DJAB ADD
   CONSTRAINT M05Key2 FOREIGN KEY (M04_ID)
   REFERENCES M04HJAB(M04_ID)  ON DELETE CASCADE ;
   
ALTER TABLE M05DJAB ADD
   CONSTRAINT M05Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR)  ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- KELOMPOK JABATAN (HEADER)
CREATE TABLE M06HKJB(
	M06_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	TglSuspend      DATE NOT NULL, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M06Key1 PRIMARY KEY (M06_ID));

   CREATE UNIQUE INDEX M06UK1 ON M06HKJB (Kode) ;

ALTER TABLE M06HKJB
ALTER COLUMN Recs SET DEFAULT 0 ; 

-- KELOMPOK JABATAN (DETAIL)
CREATE TABLE M07DKJB(
	M07_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Trans VARCHAR(1) ,
	M06_ID INTEGER, 
	M03_ID INTEGER,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M07Key1 PRIMARY KEY (M07_ID));

   CREATE UNIQUE INDEX M07UK1 ON M07DKJB (Kode,FlgDpPt,KdDpPt) ;

 create INDEX M07Key2 ON M07DKJB(M06_ID) ;
 create INDEX M07Key3 ON M07DKJB(M03_ID) ;
 create INDEX M07Key4 ON M07DKJB(KdCurr) ;

ALTER TABLE M07DKJB
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE M07DKJB
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE M07DKJB
ALTER COLUMN Trans SET DEFAULT 'T' ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M07DKJB
ADD CONSTRAINT C_M07FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE M07DKJB
ADD CONSTRAINT C_M07Trans CHECK(Trans IN ('Y', 'T')) ;

ALTER TABLE M07DKJB ADD
   CONSTRAINT M07Key2 FOREIGN KEY (M06_ID)
   REFERENCES M06HKJB(M06_ID)  ON DELETE CASCADE ;
ALTER TABLE M07DKJB ADD
   CONSTRAINT M07Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- CABANG (HEADER)
CREATE TABLE M08HCAB(
	M08_ID SERIAL,
	KdCaba VARCHAR(4) NOT NULL,
	NmCaba VARCHAR(40) ,
	SkCaba VARCHAR(10) ,
	KaCaba VARCHAR(30) ,
	AlCaba VARCHAR(40) ,
	Kota VARCHAR(25) ,
	Telpon VARCHAR(15) ,
	Fax VARCHAR(15) ,
	NPWP VARCHAR(20) NOT NULL,
	KdArea VARCHAR(4) ,
	NoAcc VARCHAR(10) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	Jabatan VARCHAR(25) , 
	NPWP2 VARCHAR(20) NOT NULL,
	NamaJamSosTek 	VARCHAR(25) , 
	JabatanJamSosTek 	VARCHAR(25) ,
	NPP		VARCHAR(8) , 
	NoRekening	VARCHAR(20) , 
	NamaBank 	VARCHAR(40) , 
	CabangBank	VARCHAR(20) , 
	KotaBank	VARCHAR(25) , 
	NamaAccHolder 	VARCHAR(30) , 
	AlamatAccHolder VARCHAR(40) , 
	KotaAccHolder 	VARCHAR(25) , 
	TTD 		VARCHAR(30) , 
	NoAccount	VARCHAR(32) , 
	FlgDTPNPWP	VARCHAR(1) , 
	FlgDTPTdkNPWP	VARCHAR(1) ,
	AlamatEmail	VARCHAR(50) ,
	TglSuspend      DATE NOT NULL, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M08Key1 PRIMARY KEY (M08_ID )) ;
   CREATE UNIQUE INDEX M08UK1 ON M08HCAB(KdCaba) ;

ALTER TABLE M08HCAB
ALTER COLUMN Recs SET DEFAULT 0 ;


-- CABANG (DETAIL)
CREATE TABLE M09DCAB(
	M09_ID SERIAL,
	KdCab VARCHAR(4) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Trans VARCHAR(1) ,
	M08_ID INTEGER, 
	M03_ID INTEGER,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M09Key1 PRIMARY KEY (M09_ID )) ;

   CREATE UNIQUE INDEX M09UK1 ON M09DCAB (KdCab,FlgDpPt,KdDpPt) ;

  create INDEX M09Key2 ON M09DCAB(M08_ID) ;
  create INDEX M09Key3 ON M09DCAB(M03_ID) ;
  create INDEX M09Key4 ON M09DCAB(KdCurr) ;

ALTER TABLE M09DCAB
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE M09DCAB
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE M09DCAB
ALTER COLUMN Trans SET DEFAULT 'T' ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M09DCAB
ADD CONSTRAINT C_M09FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;
ALTER TABLE M09DCAB
ADD CONSTRAINT C_M09Trans CHECK(Trans IN ('Y', 'T')) ;

ALTER TABLE M09DCAB ADD
   CONSTRAINT M09Key2 FOREIGN KEY (M08_ID)
   REFERENCES M08HCAB(M08_ID)  ON DELETE CASCADE ;
ALTER TABLE M09DCAB ADD
   CONSTRAINT M09Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- KLASIFIKASI PEGAWAI
CREATE TABLE M10KLAS(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	JmlPgwBlnLl DECIMAL(5,0) ,
	Harian INT ,
	Kontrak INT ,
	JnsPajak CHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M10Key1 PRIMARY KEY (Kode)) ;

create INDEX M10Key2 ON M10KLAS(JnsPajak) ;

ALTER TABLE M10KLAS
ALTER COLUMN JmlPgwBlnLl SET DEFAULT 0 ;
ALTER TABLE M10KLAS
ALTER COLUMN Harian SET DEFAULT 0 ;
ALTER TABLE M10KLAS
ALTER COLUMN Kontrak SET DEFAULT 0 ;

-- GOLONGAN (HEADER)
CREATE TABLE M12HGOL(
	M12_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	MinGol DECIMAL(15,2) ,
	MidGol DECIMAL(15,2) ,
	MaxGol DECIMAL(15,2) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	TglSuspend      DATE NOT NULL, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M12Key1 PRIMARY KEY (M12_ID)); 

   CREATE UNIQUE INDEX M12UK1 ON M12HGOL (Kode) ;

ALTER TABLE M12HGOL
ALTER COLUMN MinGol SET DEFAULT 0 ;
ALTER TABLE M12HGOL
ALTER COLUMN MidGol SET DEFAULT 0 ;
ALTER TABLE M12HGOL
ALTER COLUMN MaxGol SET DEFAULT 0 ;
ALTER TABLE M12HGOL
ALTER COLUMN Recs SET DEFAULT 0 ;

-- GOLONGAN (DETAIL) 
CREATE TABLE M13DGOL(
	M13_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Trans VARCHAR(1) ,
	M12_ID INTEGER,
	M03_ID INTEGER,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M13Key1 PRIMARY KEY (M13_ID)) ;
 
   CREATE UNIQUE INDEX M13UK1 ON M13DGOL (Kode,FlgDpPt,KdDpPt) ;

create INDEX M13Key2 ON M13DGOL(M12_ID) ;
create INDEX M13Key3 ON M13DGOL(M03_ID) ;
create INDEX M13Key4 ON M13DGOL(KdCurr) ;

ALTER TABLE M13DGOL
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE M13DGOL
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE M13DGOL
ALTER COLUMN Trans SET DEFAULT 'T' ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M13DGOL
ADD CONSTRAINT C_M13FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;
ALTER TABLE M13DGOL
ADD CONSTRAINT C_M13Trans CHECK(Trans IN ('Y', 'T')) ;

ALTER TABLE M13DGOL ADD
   CONSTRAINT M13Key2 FOREIGN KEY (M12_ID)
   REFERENCES M12HGOL(M12_ID)  ON DELETE CASCADE ;
ALTER TABLE M13DGOL ADD
   CONSTRAINT M13Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- BANK
CREATE TABLE M14BANK(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Cabang VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	NoAccount VARCHAR(32) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	biayabank DECIMAL(13,2) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M14Key1 PRIMARY KEY (Kode)); 

ALTER TABLE M14BANK 
ALTER COLUMN biayabank SET DEFAULT 0 ;

-- ALASAN KELUAR
CREATE TABLE M16ALKL(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	FlagMati INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M16Key1 PRIMARY KEY (Kode)) ;

-- UNIT KERJA
CREATE TABLE M17UKER(
	KdUker VARCHAR(8) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	NoAccount VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M17Key1 PRIMARY KEY (KdUker)) ; 

   CREATE UNIQUE INDEX M17UK1 ON M17UKER (KdUker) ;

-- MASTER PEGAWAI
CREATE TABLE M15PEGA(
	NIP VARCHAR(10) NOT NULL,
	Nama VARCHAR(25) ,
	NamaKecil VARCHAR(10) ,
	Alamat VARCHAR(80) ,
	Kelurahan VARCHAR(20) ,
	Kecamatan VARCHAR(20) ,
	Kota VARCHAR(25) ,
	KodePos VARCHAR(5) ,
	Telpon VARCHAR(15) ,
	Agama VARCHAR(1) ,
	Kewarganegaraan VARCHAR(20) ,
	SukuBangsa VARCHAR(20) ,
	NoKTP VARCHAR(40) ,
	NPWP VARCHAR(20) ,
	Keterangan VARCHAR(30) ,
	KdKlas VARCHAR(4) ,
	TtlKontrak INT ,
	TglKontrakAkhir DATE,
	Tingkatan VARCHAR(1) ,
	Status VARCHAR(1) ,
	AnakTtgg INT ,
	JnsKlmn VARCHAR(1) ,
	StsMed VARCHAR(2) ,
	StsPjk VARCHAR(2) ,
	TglLahir DATE,
	TempatLahir VARCHAR(25) ,
	NamaKontak VARCHAR(25) ,
	AlamatKontak VARCHAR(40) ,
	KotaKontak VARCHAR(25) ,
	TelponKontak VARCHAR(15) ,
	TglMasuk DATE,
	FlgGnt INT ,
	Payroll VARCHAR(1) ,
	AccHolder VARCHAR(25) ,
	BankRef VARCHAR(4) ,
	Rkbnk VARCHAR(20) ,
	KPA VARCHAR(11) ,
	TglKPA DATE,
	NoDanaPen VARCHAR(10) ,
	TglDanaPen DATE,
	NoKop VARCHAR(10) ,
	TglKop DATE,
	NoSPSI VARCHAR(10) ,
	TglSPSI DATE,
	NoYDTP VARCHAR(10) ,
	TglYDTP DATE,
	TglMutasi DATE,
	KdArea VARCHAR(4) ,
	KdCaba VARCHAR(4) ,
	KdUUsa VARCHAR(4) ,
	KdUKer VARCHAR(8) ,
	KdGlng VARCHAR(4) ,
	KdKJab VARCHAR(4) ,
	KdJaba VARCHAR(4) ,
	MasaKerja decimal(3,0) ,
	KdCurr VARCHAR(4) ,
	GajiPerc DECIMAL(15,2) ,
	PrdAwl DATE,
	GajiTetap DECIMAL(15,2) ,
	PrdTetap DATE,
	DHT VARCHAR(1) ,
	TunjIst VARCHAR(1) ,
	TunjAnak VARCHAR(1) ,
	THR VARCHAR(1) ,
	BlnTHR DECIMAL(5,2) ,
	JKK VARCHAR(1) ,
	Level VARCHAR(1) ,
	JHT VARCHAR(1) ,
	JKM VARCHAR(1) ,
	JPK VARCHAR(1) ,
	Pajak VARCHAR(1) ,
	TglKeluar DATE,
	KdTerr VARCHAR(4) ,
	TglPayr DATE,
	TglPers DATE,
	TglPajak DATE,
	BerhakLemb INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	EncGajiPerc VARCHAR(100),
	EncGajiTetap VARCHAR(100),		
	Foto VARCHAR(125) ,
	TglDaftarNPWP date NULL ,
	AlamatNPWP VARCHAR(80)  ,
	TglMasukHRD date NULL ,
	M04_ID INTEGER,   
	M06_ID INTEGER,   
	M08_ID INTEGER,    
	M12_ID INTEGER,   
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M15Key1 PRIMARY KEY (NIP)) ;

   CREATE UNIQUE INDEX M15UK1 ON M15PEGA (NIP) ;


create INDEX M15Key2 ON M15PEGA(KdArea) ;
create INDEX M15Key3 ON M15PEGA(KdUUsa) ;
create INDEX M15Key4 ON M15PEGA(M04_ID) ;
create INDEX M15Key5 ON M15PEGA(M06_ID) ;
create INDEX M15Key6 ON M15PEGA(M08_ID) ;
create INDEX M15Key7 ON M15PEGA(KdKlas) ;
create INDEX M15Key8 ON M15PEGA(M12_ID) ;
create INDEX M15Key9 ON M15PEGA(BankRef) ;
Create INDEX M15Key10 ON M15PEGA(KdTerr) ;
create INDEX M15Key11 ON M15PEGA(KdUKer) ;
create INDEX M15Key12 ON M15PEGA(KdCurr) ;

-- '1'=Islam, '2'=Kristen, '3'=Katolik, '4'=Budha, '5'=Hindu, '6'=Lainnya
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15Agama CHECK(Agama IN ('1', '2', '3', '4', '5', '6')) ;
-- '0'=Lainnya,'1'=SD, '2'=SMP, '3'=SMA, '4'=Akademi, '5'=S1, '6'=S2, '7'=S3
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15Tingkatan CHECK(Tingkatan IN ('0','1', '2', '3', '4', '5', '6', '7')) ;
-- 'L'=Lajang, 'K'=Kawin, 'X'=Janda, 'D'=Duda
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15Status CHECK(Status IN ('L', 'K', 'X', 'D')) ;
-- 'L'=Laki-laki, 'P'=Perempuan
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15JnsKlmn CHECK(JnsKlmn IN ('L', 'P')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15StsMed CHECK(StsMed IN ('L0', 'L1', 'L2', 'L3', 'K0', 'K1', 'K2', 'K3')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15StsPjk CHECK(StsPjk IN ('L0', 'L1', 'L2', 'L3', 'K0', 'K1', 'K2', 'K3')) ;
-- 'Y'=Ya, 'T'=Tidak
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15Payroll CHECK(Payroll IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15DHT CHECK(DHT IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15TunjIst CHECK(TunjIst IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15TunjAnak CHECK(TunjAnak IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15THR CHECK(THR IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15JKK CHECK(JKK IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15JHT CHECK(JHT IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15JKM CHECK(JKM IN ('Y', 'T')) ;
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15JPK CHECK(JPK IN ('Y', 'T')) ;
-- 'G'=Gross, 'N'=Gross Up, 'R'=Netto
ALTER TABLE M15PEGA
ADD CONSTRAINT C_M15Pajak CHECK(Pajak IN ('G', 'N', 'R')) ;

ALTER TABLE M15PEGA
ALTER COLUMN TtlKontrak SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN AnakTtgg SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN FlgGnt SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN MasaKerja SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN GajiPerc SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN GajiTetap SET DEFAULT 0  ;
ALTER TABLE M15PEGA
ALTER COLUMN BlnTHR SET DEFAULT 1  ;
ALTER TABLE M15PEGA
ALTER COLUMN BerhakLemb SET DEFAULT 0  ;

ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key2 FOREIGN KEY (KdArea)
   REFERENCES M01AREA(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key3 FOREIGN KEY (KdUUsa)
   REFERENCES M02UUSA(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key4 FOREIGN KEY (M04_ID) 
   REFERENCES M04HJAB(M04_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ; 
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key5 FOREIGN KEY (M06_ID)
   REFERENCES M06HKJB(M06_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key6 FOREIGN KEY (M08_ID)
   REFERENCES M08HCAB(M08_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key7 FOREIGN KEY (KdKlas)
   REFERENCES M10KLAS(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key8 FOREIGN KEY (M12_ID)
   REFERENCES M12HGOL(M12_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key9 FOREIGN KEY (BankRef)
   REFERENCES M14BANK(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key10 FOREIGN KEY (KdTerr)
   REFERENCES M16ALKL(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key11 FOREIGN KEY (KdUKer)
   REFERENCES M17UKER(KdUker) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M15PEGA ADD
   CONSTRAINT M15Key12 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- DATA KELUARGA
CREATE TABLE M23KLRG(
	M23_ID SERIAL, 
	NIP VARCHAR(10) NOT NULL,
	Nama VARCHAR(25) NOT NULL,
	JnsKlmn VARCHAR(1) ,
	Hubungan VARCHAR(1) ,
	AnakKe VARCHAR(1) ,
	TglLahir DATE,
	TmpLahir VARCHAR(10) ,
	Pendidikan VARCHAR(10) ,
	Keterangan VARCHAR(30) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	Tglefektif date, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M23Key1 PRIMARY KEY (M23_ID)) ; 

   CREATE UNIQUE INDEX M23UK1 ON M23KLRG (NIP,Nama) ;

-- 'L'=Laki=laki, 'P'=Perempuan
ALTER TABLE M23KLRG
ADD CONSTRAINT C_M23JnsKlmn CHECK(JnsKlmn IN ('L', 'P')) ;
-- '1'=Pasangan, '2'=Anak, '3'=Ayah, '4'=Ibu, '5'=Lain-lain
ALTER TABLE M23KLRG
ADD CONSTRAINT C_M23Hubungan CHECK(Hubungan IN ('1', '2', '3', '4', '5')) ;
-- '1', '2', '3', '>'= >3, 'N'=N/A
ALTER TABLE M23KLRG
ADD CONSTRAINT C_M23AnakKe CHECK(AnakKe IN ('1', '2', '3', '>', 'N')) ;

ALTER TABLE M23KLRG ADD
   CONSTRAINT M23Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- JABATAN/TANDATANGAN
CREATE TABLE M33JABT(
	Kode VARCHAR(2) NOT NULL,
	Keterangan VARCHAR(30) NOT NULL,
	Nama VARCHAR(25) ,
	Jabatan VARCHAR(25) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M33Key1 PRIMARY KEY (Kode)) ;

-- JENIS PIUTANG
CREATE TABLE M22JNSP(
	KdJnsP VARCHAR(4) NOT NULL,
	NmPiut VARCHAR(20) ,
	SkPiut VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M22Key1 PRIMARY KEY (KdJnsP)) ;

-- TRANSAKSI PIUTANG (HEADER)
CREATE TABLE T05HPIU(
	T05_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	KdJnsP VARCHAR(4) NOT NULL,
	TgDoku DATE NOT NULL,
	NoRef VARCHAR(15) ,
	Piutang DECIMAL(15,2) ,
	Bunga DECIMAL(15,2) ,
	TtlAngsPok DECIMAL(15,2) ,
	TtlAngsBun DECIMAL(15,2) ,
	BayPokPay DECIMAL(15,2) ,
	BayBngPay DECIMAL(15,2) ,
	BayPokLgs DECIMAL(15,2) ,
	BayBngLgs DECIMAL(15,2) ,
	PrsBunga DECIMAL(5,2) ,
	JnsBunga VARCHAR(1) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T05Key1 PRIMARY KEY (T05_ID)) ;

   CREATE UNIQUE INDEX T05UK1 ON T05HPIU (NIP,KdJnsP,TgDoku) ;

create INDEX T05Key2 ON T05HPIU(NIP) ;
create INDEX T05Key3 ON T05HPIU(KdJnsP) ;

-- 'F'=Flat, 'M'=Menurun, ' '=Manual
ALTER TABLE T05HPIU
ADD CONSTRAINT C_T05JnsBunga CHECK(JnsBunga IN (' ','F', 'M')) ;

ALTER TABLE T05HPIU
ALTER COLUMN Piutang SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN Bunga SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN TtlAngsPok SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN TtlAngsBun SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN BayPokPay SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN BayBngPay SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN BayPokLgs SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN BayBngLgs SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN PrsBunga SET DEFAULT 0 ;
ALTER TABLE T05HPIU
ALTER COLUMN Recs SET DEFAULT 0 ;

ALTER TABLE T05HPIU ADD
   CONSTRAINT T05Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T05HPIU ADD
   CONSTRAINT T05Key3 FOREIGN KEY (KdJnsP)
   REFERENCES M22JNSP(KdJnsP) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- TRANSAKSI PIUTANG (DETAIL)
CREATE TABLE T06DPIU(
	T06_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	KdJnsP VARCHAR(4) NOT NULL,
	TgDoku DATE NOT NULL,
	PrdAngs DATE NOT NULL,
	JmlAngs DECIMAL(15,2) ,
	JmlBunga DECIMAL(15,2) ,
	T05_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T06Key1 PRIMARY KEY (T06_ID)) ; 

   CREATE UNIQUE INDEX T06UK1 ON T06DPIU (NIP,KdJnsP,TgDoku,PrdAngs) ;

create INDEX T06Key2 ON T06DPIU(NIP,KdJnsP,TgDoku) ; 

ALTER TABLE T06DPIU
ALTER COLUMN JmlAngs SET DEFAULT 0 ;
ALTER TABLE T06DPIU
ALTER COLUMN JmlBunga SET DEFAULT 0 ;

ALTER TABLE T06DPIU ADD
   CONSTRAINT T06Key2 FOREIGN KEY (T05_ID)
   REFERENCES T05HPIU(T05_ID)  ON DELETE CASCADE ; 


-- TRANSAKSI PEMBAYARAN PIUTANG 
CREATE TABLE T07BAYP(
	T07_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	KdJnsP VARCHAR(4) NOT NULL,
	TgPiut DATE NOT NULL,
	TgDoku DATE NOT NULL,
	BayPokok DECIMAL(15,2) ,
	BayBunga DECIMAL(15,2) ,
	Comp VARCHAR(1) NOT NULL,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	Keterangan VARCHAR(40),
	T05_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T07Key1 PRIMARY KEY (T07_ID)) ;

   CREATE UNIQUE INDEX T07UK1 ON T07BAYP (NIP,KdJnsP,TgPiut,TgDoku,Comp) ;

create INDEX T07Key2 ON T07BAYP(NIP,KdJnsP,TgPiut) ; 

ALTER TABLE T07BAYP
ALTER COLUMN BayPokok SET DEFAULT 0 ;
ALTER TABLE T07BAYP
ALTER COLUMN BayBunga SET DEFAULT 0 ;

ALTER TABLE T07BAYP ADD
   CONSTRAINT T07Key2 FOREIGN KEY (T05_ID)
   REFERENCES T05HPIU(T05_ID)  ON DELETE CASCADE ; 


-- HISTORY POSTING DATE PEGAWAI
CREATE TABLE S05PSTD(
	S05_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	TglPosting DATE NOT NULL,
	FlagTHR VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S05Key1 PRIMARY KEY (S05_ID)) ; 

   CREATE UNIQUE INDEX S05UK1 ON S05PSTD (NIP,TglPosting) ;

-------------> 01.08.2001
--*** MODIFIKASI PER 01 AGUSTUS 2001 ***--

-- HISTORICAL DELETED HEADER TRANSACTION
CREATE TABLE VE1HDEL(
	VE1_ID SERIAL,
	KDMODL VARCHAR(3) ,
	KDREGS VARCHAR(3) ,
	RID VARCHAR(1) ,
	NIP VARCHAR(10) ,
	Tanggal1 DATE ,
	FlgDpPt VARCHAR(1) ,
	KdDpPt VARCHAR(4) ,
	Tanggal2 DATE,
	Kode VARCHAR(4) ,
	Tahun DECIMAL(4,0) ,
	FlagKel INT ,
	Nama VARCHAR(20) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Userid VARCHAR(10) ,
	Keterangan VARCHAR(60),
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT VE1Key1 PRIMARY KEY (VE1_ID)) ; 

   CREATE UNIQUE INDEX VE1UK1 ON VE1HDEL (KDMODL,KDREGS,RID,NIP,Tanggal1,FlgDpPt,KdDpPt,Tanggal2,Kode,Tahun,FlagKel,Nama,UpdDate,UpdTime,UserId) ;

ALTER TABLE VE1HDEL
ALTER COLUMN tahun SET DEFAULT 0 ;
ALTER TABLE VE1HDEL
ALTER COLUMN FlagKel SET DEFAULT 0 ;


--<------------- 01.08.2001
--*** MODULE PAYROLL ***

CREATE TABLE M03DPPT(
	M03_ID SERIAL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	NmDpPt VARCHAR(30) ,
	SkDpPt VARCHAR(10) ,
	JnDpPt VARCHAR(1) ,
	Persen DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Status VARCHAR(1) ,
	UsComp VARCHAR(1) ,
	NoLayar INT ,
	Kolom VARCHAR(2) ,
	Pajak VARCHAR(1) ,
	NoAcc VARCHAR(10) ,
	Flag VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M03Key1 PRIMARY KEY (M03_ID)) ; 

   CREATE UNIQUE INDEX M03UK1 ON M03DPPT (FlgDpPt,KdDpPt) ;

create INDEX M03Key2 ON M03DPPT(KdCurr) ; 

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M03DPPT
ADD CONSTRAINT C_M03FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;
-- 'H'=Harian, 'B'=Bulanan
ALTER TABLE M03DPPT
ADD CONSTRAINT C_M03JnDpPt CHECK(JnDpPt IN ('H', 'B')) ;
-- 'K'=Khusus, 'U'=Umum
--; ALTER TABLE M03DPPT
--ADD CONSTRAINT C_M03Status CHECK(Status IN ('K', 'U')) ;
-- 'K'=Komputer, 'P'=Pemakai
ALTER TABLE M03DPPT
ADD CONSTRAINT C_M03UsComp CHECK(UsComp IN ('K', 'P')) ; 
-- 'G'=Gross, 'N'=Gross Up, 'R'=Netto, 'D'=SET DEFAULT Pegawai
ALTER TABLE M03DPPT
ADD CONSTRAINT C_M03Pajak CHECK(Pajak IN ('G', 'N', 'R', 'D')) ;

ALTER TABLE M03DPPT
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE M03DPPT
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE M03DPPT
ALTER COLUMN NoLayar SET DEFAULT 0 ; 
ALTER TABLE M03DPPT
ALTER COLUMN Status SET DEFAULT 0  ;

ALTER TABLE M03DPPT ADD
   CONSTRAINT M03Key2 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- GAJI GOLONGAN
CREATE TABLE M11GGOL(
	M11_ID SERIAL,
	Kode VARCHAR(4) NOT NULL,
	FrTempo INT NOT NULL,
	GajiPokok DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M12_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M11Key1 PRIMARY KEY (M11_ID)) ; 

   CREATE UNIQUE INDEX M11UK1 ON M11GGOL (Kode,FrTempo) ;

create INDEX M11Key2 ON M11GGOL(M12_ID) ; 
create INDEX M11Key3 ON M11GGOL(KdCurr) ;

ALTER TABLE M11GGOL
ALTER COLUMN FrTempo SET DEFAULT 0 ;
ALTER TABLE M11GGOL
ALTER COLUMN GajiPokok SET DEFAULT 0 ; 

ALTER TABLE M11GGOL ADD
   CONSTRAINT M11Key2 FOREIGN KEY (M12_ID) 
   REFERENCES M12HGOL(M12_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M11GGOL ADD
   CONSTRAINT M11Key3 FOREIGN KEY (KdCurr) 
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- PARAMETER JAMSOSTEK
CREATE TABLE M18JAMS(
	M18_ID SERIAL,
	Progrm VARCHAR(3) NOT NULL,
	LevelJKK INT NOT NULL,
	Perush DECIMAL(6,3) ,
	Pgwi DECIMAL(7,2) ,
	PgwiK DECIMAL(6,3) ,
	UpahMax DECIMAL(15,2) ,
	NoAcc VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,	
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M18Key1 PRIMARY KEY (M18_ID)) ;

   CREATE UNIQUE INDEX M18UK1 ON M18JAMS (Progrm,LevelJKK) ;

ALTER TABLE M18JAMS
ADD CONSTRAINT C_M18Progrm CHECK(Progrm IN ('JKK', 'JHT', 'JKM', 'JPK')) ;

ALTER TABLE M18JAMS
ALTER COLUMN LevelJKK SET DEFAULT 0 ;
ALTER TABLE M18JAMS
ALTER COLUMN Perush SET DEFAULT 0 ;
ALTER TABLE M18JAMS
ALTER COLUMN Pgwi SET DEFAULT 0 ;
ALTER TABLE M18JAMS
ALTER COLUMN PgwiK SET DEFAULT 0 ;
ALTER TABLE M18JAMS
ALTER COLUMN UpahMax SET DEFAULT 0 ;


-- FORMAT SLIP GAJI (HEADER)
CREATE TABLE M19HSLG(
	M19_ID SERIAL,
	TipeLap VARCHAR(1) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	NomFormat DECIMAL(3,0) NOT NULL,
	Keterangan VARCHAR(20) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M19Key1 PRIMARY KEY (M19_ID)) ; 

   CREATE UNIQUE INDEX M19UK1 ON M19HSLG (TipeLap,FlgDpPt,NomFormat) ;

-- '1'=Slip Gaji, '2'=Arsip Gaji, '3'=Kartu Slip
ALTER TABLE M19HSLG
ADD CONSTRAINT C_M19TipeLap CHECK(TipeLap IN ('1', '2', '3')) ;
-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M19HSLG
ADD CONSTRAINT C_M19FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE M19HSLG
ALTER COLUMN NomFormat SET DEFAULT 0 ;
ALTER TABLE M19HSLG
ALTER COLUMN Recs SET DEFAULT 0 ;


-- FORMAT SLIP GAJI (DETAIL)
CREATE TABLE M20DSLG(
	M20_ID SERIAL,
	TipeLap VARCHAR(1) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	NomFormat DECIMAL(3,0) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	FlgAngs VARCHAR(1) NOT NULL,
	M19_ID INTEGER, 
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M20Key1 PRIMARY KEY (M20_ID)) ; 

   CREATE UNIQUE INDEX M20UK1 ON M20DSLG (TipeLap,FlgDpPt,NomFormat,KdDpPt,FlgAngs) ;

create INDEX M20Key2 ON M20DSLG(M19_ID) ;
create INDEX M20Key3 ON M20DSLG(M03_ID) ;

-- 'A'=Angsuran Pokok, 'B'=Angsuran Bunga, ' '=Bukan Angsuran
ALTER TABLE M20DSLG
ADD CONSTRAINT C_M20FlgAngs CHECK(FlgAngs IN ('A', 'B', ' ')) ;

ALTER TABLE M20DSLG
ALTER COLUMN NomFormat SET DEFAULT 0 ; 

ALTER TABLE M20DSLG ADD
   CONSTRAINT M20Key2 FOREIGN KEY (M19_ID)
   REFERENCES M19HSLG(M19_ID)  ON DELETE CASCADE ;
ALTER TABLE M20DSLG ADD
   CONSTRAINT M20Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- JENIS PAJAK 
CREATE TABLE M41JPJK(
	Kode CHAR(1) NOT NULL,
	Keterangan VARCHAR(40) ,
	Singkatan VARCHAR(10) ,
	BiayaJabatan INT ,
	PTKP INT ,
	PersenPj1 DECIMAL(5,2) ,
	PersenPj2 DECIMAL(5,2) ,
	PersenPj3 DECIMAL(5,2) ,
	PersenPj4 DECIMAL(5,2) ,
	PersenPj5 DECIMAL(5,2) ,
	PersenPj6 DECIMAL(5,2) ,
	PersenPj7 DECIMAL(5,2) ,
	LimitPj1 DECIMAL(15,2) ,
	LimitPj2 DECIMAL(15,2) ,
	LimitPj3 DECIMAL(15,2) ,
	LimitPj4 DECIMAL(15,2) ,
	LimitPj5 DECIMAL(15,2) ,
	LimitPj6 DECIMAL(15,2) ,
	LimitPj7 DECIMAL(15,2) ,
	JnsForm1721 VARCHAR(2) ,
	FlagKhusus INT ,
	PersenPKP DECIMAL(5,2) ,
	Final INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M41Key1 PRIMARY KEY (Kode)) ; 

ALTER TABLE M41JPJK
ALTER COLUMN BiayaJabatan SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PTKP SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj1 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj2 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj3 SET DEFAULT 0 ; 
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj4 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj5 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj6 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPj7 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj1 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj2 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj3 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj4 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj5 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj6 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN LimitPj7 SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN FlagKhusus SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN PersenPKP SET DEFAULT 0 ;
ALTER TABLE M41JPJK
ALTER COLUMN Final SET DEFAULT 0 ;

-- JENIS ASURANSI
CREATE TABLE M44JASU(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Perusahaan VARCHAR(40) ,
	JenisAsuransi VARCHAR(1) ,
	PremiPegawai DECIMAL(6,3) ,
	PremiPerusahaan DECIMAL(6,3) ,
	FlgDpPt1 VARCHAR(1) ,
	KdDpPt1 VARCHAR(4) ,
	FlgDpPt2 VARCHAR(1) ,
	KdDpPt2 VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M44Key1 PRIMARY KEY (Kode)) ;

create INDEX M44Key2 ON M44JASU(M03_ID) ; 

-- '1'=Pensiun, '2'=Non_Pensiun
ALTER TABLE M44JASU
ADD CONSTRAINT C_M44JenisAsuransi CHECK(JenisAsuransi IN ('1', '2')) ;

ALTER TABLE M44JASU
ALTER COLUMN PremiPegawai SET DEFAULT 0 ;
ALTER TABLE M44JASU
ALTER COLUMN PremiPerusahaan SET DEFAULT 0 ;

ALTER TABLE M44JASU ADD
   CONSTRAINT M44Key2 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- KARYAWATI KHUSUS
CREATE TABLE M45KKHS(
	NIP VARCHAR(10) NOT NULL,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M45Key1 PRIMARY KEY (NIP)) ; 

ALTER TABLE M45KKHS ADD
   FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- PENDAPATAN/POTONGAN KHUSUS
CREATE TABLE M46PPKH(
	M46_ID SERIAL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M46Key1 PRIMARY KEY (M46_ID));
   
	create INDEX M46Key2 ON M46PPKH(M03_ID) ; 	
   CREATE UNIQUE INDEX M46UK1 ON M46PPKH (FlgDpPt,KdDpPt) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE M46PPKH
ADD CONSTRAINT C_M46FlgDpPt CHECK(FlgDpPt IN ('D', 'P'));

ALTER TABLE M46PPKH ADD
   FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- PARAMETER RANGE LEMBUR
CREATE TABLE M47PRLR(
	TglProses DATE NOT NULL,
	TglAwal DATE,
	TglAkhir DATE,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M47Key1 PRIMARY KEY (TglProses));

--- @@@@@@@@@@@@@@@@@@

-- TRANSAKSI LEMBUR
CREATE TABLE T01LEMB(
	T01_ID SERIAL,
	TgDocu DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	FlgLemb VARCHAR(1) ,
	RefDok VARCHAR(15) ,
	JamLemb DECIMAL(4,2) ,
	JmlUMkn DECIMAL(15,2) ,
	Flag INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T01Key1 PRIMARY KEY (T01_ID)) ; 

   CREATE UNIQUE INDEX T01UK1 ON T01LEMB (TgDocu,NIP) ;

create INDEX T01Key2 ON T01LEMB(NIP) ; 

-- 'K'=Hari Kerja, 'L'=Hari Libur
ALTER TABLE T01LEMB
ADD CONSTRAINT C_T01FlgLemb CHECK(FlgLemb IN ('K', 'L','I')) ;

ALTER TABLE T01LEMB
ALTER COLUMN JamLemb SET DEFAULT 0 ;
ALTER TABLE T01LEMB
ALTER COLUMN JmlUMkn SET DEFAULT 0 ;
ALTER TABLE T01LEMB
ALTER COLUMN Flag SET DEFAULT 0 ;

ALTER TABLE T01LEMB ADD
   CONSTRAINT T01Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PENDAPATAN/POTONGAN HARIAN
CREATE TABLE T02ABSN(
	T02_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tanggal DATE NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	JmlAbsn DECIMAL(3,1) ,
	Flag INT ,
	BayarDimuka INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T02Key1 PRIMARY KEY (T02_ID)) ; 

   CREATE UNIQUE INDEX T02UK1 ON T02ABSN (NIP,Tanggal,FlgDpPt,KdDpPt) ;

create INDEX T02Key2 ON T02ABSN(NIP) ;
create INDEX T02Key3 ON T02ABSN(M03_ID) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE T02ABSN
ADD CONSTRAINT C_T02FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE T02ABSN
ALTER COLUMN JmlAbsn SET DEFAULT 0 ;
ALTER TABLE T02ABSN
ALTER COLUMN Flag SET DEFAULT 0 ;
ALTER TABLE T02ABSN
ALTER COLUMN BayarDimuka SET DEFAULT 0 ;

ALTER TABLE T02ABSN ADD
   CONSTRAINT T02Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T02ABSN ADD
   CONSTRAINT T02Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PENDAPATAN/POTONGAN VARIABEL
CREATE TABLE T03VARI(
	T03_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	PrdMulai DATE NOT NULL,
	PrdSd DATE NOT NULL,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Persen DECIMAL(5,2) ,
	BayarDimuka INT ,
	Flag INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T03Key1 PRIMARY KEY (T03_ID)) ; 

   CREATE UNIQUE INDEX T03UK1 ON T03VARI (NIP,FlgDpPt,KdDpPt,PrdMulai,PrdSd) ;

create INDEX T03Key2 ON T03VARI(NIP) ;
create INDEX T03Key3 ON T03VARI(M03_ID) ;
create INDEX T03Key4 ON T03VARI(KdCurr) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE T03VARI 
ADD CONSTRAINT C_T03FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE T03VARI
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE T03VARI
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE T03VARI
ALTER COLUMN BayarDimuka SET DEFAULT 0 ;
ALTER TABLE T03VARI
ALTER COLUMN Flag SET DEFAULT 0 ;

ALTER TABLE T03VARI ADD
   CONSTRAINT T03Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T03VARI ADD
   CONSTRAINT T03Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T03VARI ADD
   CONSTRAINT T03Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PENDAPATAN/POTONGAN TETAP
CREATE TABLE T04TTAP(
	T04_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Persen DECIMAL(5,2) ,
	BayarDimuka INT ,
	FlgAuto VARCHAR(1) ,
	Flag INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T04Key1 PRIMARY KEY (T04_ID)) ;

   CREATE UNIQUE INDEX T04UK1 ON T04TTAP (NIP,FlgDpPt,KdDpPt) ;

create INDEX T04Key2 ON T04TTAP(NIP) ;
create INDEX T04Key3 ON T04TTAP(M03_ID) ;
create INDEX T04Key4 ON T04TTAP(KdCurr) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE T04TTAP
ADD CONSTRAINT C_T04FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE T04TTAP
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE T04TTAP
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE T04TTAP
ALTER COLUMN BayarDimuka SET DEFAULT 0 ;
ALTER TABLE T04TTAP
ALTER COLUMN Flag SET DEFAULT 0 ;

ALTER TABLE T04TTAP ADD
   CONSTRAINT T04Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T04TTAP ADD
   CONSTRAINT T04Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T04TTAP ADD
   CONSTRAINT T04Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ; 


-- TRANSAKSI PENDAPATAN AKUMULASI
CREATE TABLE T17PDAK(
	T17_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	LevelAkm DECIMAL(2,0) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2) ,
	Flag INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T17Key1 PRIMARY KEY (T17_ID)) ;

   CREATE UNIQUE INDEX T17UK1 ON T17PDAK (NIP,LevelAkm,FlgDpPt,KdDpPt) ;

create INDEX T17Key2 ON T17PDAK(NIP) ;
create INDEX T17Key3 ON T17PDAK(M03_ID) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE T17PDAK
ADD CONSTRAINT C_T17 CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE T17PDAK
ALTER COLUMN LevelAkm SET DEFAULT 0 ;
ALTER TABLE T17PDAK
ALTER COLUMN Persen SET DEFAULT 0 ; 
ALTER TABLE T17PDAK
ALTER COLUMN Flag SET DEFAULT 0 ;

ALTER TABLE T17PDAK ADD
   CONSTRAINT T17Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T17PDAK ADD
   CONSTRAINT T17Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PERPANJANGAN KONTRAK
CREATE TABLE T16PKON(
	T16_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	TglAkhir DATE NOT NULL,
	Keterangan VARCHAR(60) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(30) ,
	NoKontrak VARCHAR(30) ,
	Jabatan VARCHAR(4) ,
	EncProGaji VARCHAR(100) ,
	kdCurr VARCHAR(4) ,
	FrDate DATE NOT NULL,
	M04_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T16Key1 PRIMARY KEY (T16_ID)) ;

   CREATE UNIQUE INDEX T16UK1 ON T16PKON (NIP,FrDate,TglAkhir) ;

create INDEX T16Key2 ON T16PKON(NIP) ;
create INDEX T16Key3 ON T16PKON(M04_ID) ;
create INDEX T16Key4 ON T16PKON(kdCurr) ;

--Relasi
ALTER TABLE T16PKON ADD
   CONSTRAINT T16Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
--
ALTER TABLE T16PKON ADD
   CONSTRAINT T16Key3 FOREIGN KEY (M04_ID)
   REFERENCES M04HJAB(M04_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
--
ALTER TABLE T16PKON ADD
   CONSTRAINT T16Key4 FOREIGN KEY (kdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;
--

-- TRANSAKSI HARI KERJA PEGAWAI BARU/KELUAR
CREATE TABLE T18HKER(
	T18_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	InOut VARCHAR(1) NOT NULL,
	HKerja DECIMAL(4,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T18Key1 PRIMARY KEY (T18_ID)) ;

   CREATE UNIQUE INDEX T18UK1 ON T18HKER (NIP,InOut) ;

create INDEX T18Key2 ON T18HKER(NIP) ;

-- 'M'asuk, 'K'eluar
ALTER TABLE T18HKER
ADD CONSTRAINT C_T18InOut CHECK(InOut IN ('M', 'K')) ;

ALTER TABLE T18HKER
ALTER COLUMN HKerja SET DEFAULT 0 ;

ALTER TABLE T18HKER ADD
   CONSTRAINT T18Key2 FOREIGN KEY (Nip)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PESANGON
CREATE TABLE T19PESA(
	NIP VARCHAR(10) NOT NULL,
	TglKeluar DATE,
	NilaiPesangon DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	FlagProses VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	NilaiPeraturan DECIMAL(15,2) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T19Key1 PRIMARY KEY (NIP)) ; 

create INDEX T19Key2 ON T19PESA(KdCurr) ;
create INDEX T19Key3 ON T19PESA(NIP) ;

ALTER TABLE T19PESA
ALTER COLUMN NilaiPesangon SET DEFAULT 0 ;
ALTER TABLE T19PESA
ALTER COLUMN NilaiPeraturan SET DEFAULT 0 ;

ALTER TABLE T19PESA ADD
   CONSTRAINT T19Key2 FOREIGN KEY (KdCurr) 
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T19PESA ADD
   CONSTRAINT T19Key3 FOREIGN KEY (NIP) 
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI KEPESERTAAN ASURANSI
CREATE TABLE T22KPAS(
	T22_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Kode VARCHAR(4) NOT NULL,
	NoPeserta VARCHAR(20) ,
	TanggalMasuk DATE,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T22Key1 PRIMARY KEY (T22_ID)) ;

   CREATE UNIQUE INDEX T22UK1 ON T22KPAS (NIP,Kode) ;

create INDEX T22Key2 ON T22KPAS(NIP) ;
create INDEX T22Key3 ON T22KPAS(Kode) ;

ALTER TABLE T22KPAS ADD
   CONSTRAINT T22Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T22KPAS ADD
   CONSTRAINT T22Key3 FOREIGN KEY (Kode)
   REFERENCES M44JASU(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI MANTAN PEGAWAI
CREATE TABLE T23MPEG(
	T23_ID SERIAL,
	Tanggal DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T23Key1 PRIMARY KEY (T23_ID)) ;

   CREATE UNIQUE INDEX T23UK1 ON T23MPEG (Tanggal,NIP,FlgDpPt,KdDpPt) ;

create INDEX T23Key2 ON T23MPEG(NIP) ;
create INDEX T23Key3 ON T23MPEG(M03_ID) ;
create INDEX T23Key4 ON T23MPEG(KdCurr) ;

-- 'D'=Pendapatan, 'P'=Potongan
ALTER TABLE T23MPEG
ADD CONSTRAINT C_T23FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE T23MPEG
ALTER COLUMN Nilai SET DEFAULT 0 ;

ALTER TABLE T23MPEG ADD
   CONSTRAINT T23Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T23MPEG ADD
   CONSTRAINT T23Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T23MPEG ADD
   CONSTRAINT T23Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- Transaksi Pendapatan Lain-lain
CREATE TABLE T24PDLL(
	NIP VARCHAR(10) NOT NULL,
	Keterangan VARCHAR(40),
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T24Key1 PRIMARY KEY (NIP)) ; 

CREATE TABLE T25OPBP(
   FlgImpl VARCHAR(1) ,
   NIP VARCHAR(10) NOT NULL,
   Tanggal DATE,
   PrevDate DATE,
   KdCaba VARCHAR(4) ,
   K1GCT DECIMAL(15,2) ,
   K1NCT DECIMAL(15,2) ,
   K2GCT DECIMAL(15,2) ,
   K2NCT DECIMAL(15,2) ,
   K3GCT DECIMAL(15,2) ,
   K3NCT DECIMAL(15,2) ,
   K4GCT DECIMAL(15,2) ,
   K4NCT DECIMAL(15,2) ,
   K5GCT DECIMAL(15,2) ,
   K5NCT DECIMAL(15,2) ,
   K6GCT DECIMAL(15,2) ,
   K6NCT DECIMAL(15,2) ,
   K10GCT DECIMAL(15,2) ,
   K12GCT DECIMAL(15,2) ,
   PPhCT DECIMAL(15,2) ,
   K8GCT DECIMAL(15,2) ,
   K8NCT DECIMAL(15,2) ,
   K11GCT DECIMAL(15,2) ,
   K1GCS DECIMAL(15,2) ,
   K1NCS DECIMAL(15,2) ,
   K2GCS DECIMAL(15,2) ,
   K2NCS DECIMAL(15,2) ,
   K3GCS DECIMAL(15,2) ,
   K3NCS DECIMAL(15,2) ,
   K4GCS DECIMAL(15,2) ,
   K4NCS DECIMAL(15,2) ,
   K5GCS DECIMAL(15,2) ,
   K5NCS DECIMAL(15,2) ,
   K6GCS DECIMAL(15,2) ,
   K6NCS DECIMAL(15,2) ,
   K10GCS DECIMAL(15,2) ,
   K12GCS DECIMAL(15,2) ,
   PPhCS DECIMAL(15,2) ,
   K8GCS DECIMAL(15,2) ,
   K8NCS DECIMAL(15,2) ,
   K11GCS DECIMAL(15,2) ,
   Userid VARCHAR(12) ,
   UpdDate DATE,
   UpdTime TIMESTAMP,
   masaperolehan integer ,
   encs01grossincomenbytd varchar(100),
   encs01occsupport1 varchar(100),
   encs01col12ytd varchar(100),
   encs01oldinctaxapaidnb varchar(100),
   encs01grossincomebytd varchar(100),
   encs01taxtotal varchar(100),
   encs01oldinctaxapaidb varchar(100),
   encfixincomepytd varchar(100),
   encoldfixincomepytd varchar(100),
   encfixincome varchar(100),
   encvarincomepytd varchar(100),
   encoldvarincomepytd varchar(100),
   encvarincome varchar(100),
   enccol2ytd varchar(100),
   encoldcol2ytd varchar(100),
   enccol3ytd varchar(100),
   encoldcol3ytd varchar(100),
   enccol4ytd varchar(100),
   encoldcol4ytd varchar(100),
   enccol5ytd varchar(100),
   encoldcol5ytd varchar(100),
   enccol6ytd varchar(100),
   encoldcol6ytd varchar(100),
   enccol12pytd varchar(100),
   encoldcol12pytd varchar(100),
   enckolom12 varchar(100),
   encoccsupport1 varchar(100),
   encoldoccsupport1 varchar(100),
   encegiynb varchar(100),
   encptkp varchar(100),
   enceyti varchar(100),
   enceyit varchar(100),
   encytdit varchar(100),
   encinctaxapaidnb varchar(100),
   encoldinctaxapaidnb varchar(100),
   enccol8pytd varchar(100),
   encoldcol8pytd varchar(100),
   enckolom8 varchar(100),
   encoccsupport2 varchar(100),
   encoldoccsupport2 varchar(100),
   enceyitt varchar(100),
   encinctaxapaidb varchar(100),
   encoldinctaxapaidb varchar(100),
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T25Key1 PRIMARY KEY (NIP)); 

create INDEX T25Key2 ON T25OPBP(KdCaba) ;

--MBIL 
ALTER TABLE T25OPBP
ADD CONSTRAINT C_T25FlgImpl CHECK(FlgImpl IN ('Y', 'T')) ;

ALTER TABLE T25OPBP
ADD CONSTRAINT C_T25MasaPerolehan CHECK(MasaPerolehan BETWEEN 0 AND 11) ;

-- SET DEFAULT 
ALTER TABLE T25OPBP
ALTER COLUMN FlgImpl SET DEFAULT 'Y' ;

ALTER TABLE T25OPBP
ALTER COLUMN K1GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K1NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K2GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K2NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K3GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K3NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K4GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K4NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K5GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K5NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K6GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K6NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K10GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K12GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN PPhCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K8GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K8NCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K11GCT SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K1GCS SET DEFAULT 0 ; 

ALTER TABLE T25OPBP
ALTER COLUMN K1NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K2GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K2NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K3GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K3NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K4GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K4NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K5GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K5NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K6GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K6NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K10GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K12GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN PPhCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K8GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K8NCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN K11GCS SET DEFAULT 0 ;

ALTER TABLE T25OPBP
ALTER COLUMN MasaPerolehan SET DEFAULT 0 ;

--RELASI 
ALTER TABLE T25OPBP ADD
   FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


CREATE TABLE T26PPHL(
	T26_ID SERIAL,
	Periode DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	EncPelunasan VARCHAR(99) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T26Key1 PRIMARY KEY (T26_ID)) ;

   CREATE UNIQUE INDEX T26UK1 ON T26PPHL  (Periode,NIP) ;

create INDEX T26Key2 ON T26PPHL(NIP) ; 

ALTER TABLE T26PPHL ADD
   CONSTRAINT T26Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- SUMMARY PAYROLL (HEADER)
CREATE TABLE S01HGAJ(
   S01_ID SERIAL,
   TglPayr DATE NOT NULL,
   NIP VARCHAR(10) NOT NULL,
   Nama VARCHAR(25) ,
   KdKlas VARCHAR(4) ,
   KdArea VARCHAR(4) ,
   KdCaba VARCHAR(4) ,
   KdUUsa VARCHAR(4) ,
   KdUKer VARCHAR(8) ,
   KdGlng VARCHAR(4) ,
   KdKJab VARCHAR(4) ,
   KdJaba VARCHAR(4) ,
   StsPjk VARCHAR(2) ,
   CommDate DATE,
   TermDate DATE,
   JnsKlmn VARCHAR(1) ,
   StsSip VARCHAR(1) ,
   TotAnak INT ,
   KPA VARCHAR(11) ,
   AccHolder VARCHAR(25) ,
   RkBnk VARCHAR(20) ,
   BankRef VARCHAR(4) ,
   NoAcc VARCHAR(10) ,
   NoSpt VARCHAR(5) ,
   TakeHomePay DECIMAL(15,2) ,
   TotInc DECIMAL(15,2) ,
   TotDed DECIMAL(15,2) ,
   GrossIncomeNBYTD DECIMAL(15,2) ,
   OccSupport1 DECIMAL(15,2) ,
   Col12YTD DECIMAL(15,2) ,
   EGIYNB DECIMAL(15,2) ,
   PTKP DECIMAL(15,2) ,
   EYTI DECIMAL(15,2) ,
   EYIT DECIMAL(15,2) ,
   YTDIT DECIMAL(15,2) ,
   IncTaxAPaidNB DECIMAL(15,2) ,
   GrossIncomeBYTD DECIMAL(15,2) ,
   OccSupport2 DECIMAL(15,2) ,
   TaxTotal DECIMAL(15,2) ,
   IncTaxAPaidB DECIMAL(15,2) ,
   FlagTHR VARCHAR(1) ,
   Hari DECIMAL(3,1) ,
   AkmHari INT ,
   FlagM VARCHAR(1) ,
   FlagH VARCHAR(1) ,
   JnsPajak VARCHAR(1) ,
   TaxPesangonRp DECIMAL(15,2) ,
   Recs DECIMAL(5,0) ,
   Userid VARCHAR(12) ,
   UpdDate DATE,
   UpdTime TIMESTAMP,
   EncTakeHomePay VARCHAR(100),
   EncTotInc VARCHAR(100),
   EncTotDed VARCHAR(100),
   EncGrossIncomeNBYTD VARCHAR(100), 
   EncOccSupport1		VARCHAR(100), 
   EncCol12YTD 		VARCHAR(100), 
   EncEGIYNB 			VARCHAR(100), 
   EncPTKP 			VARCHAR(100), 
   EncEYTI			VARCHAR(100), 
   EncEYIT 			VARCHAR(100), 
   EncYTDIT			VARCHAR(100), 
   EncIncTaxAPaidNB 	VARCHAR(100), 
   EncGrossIncomeBYTD	VARCHAR(100), 
   EncOccSupport2		VARCHAR(100), 
   EncTaxTotal 		VARCHAR(100), 
   EncIncTaxAPaidB 	VARCHAR(100), 
   EncTaxPesangonRp 	VARCHAR(100), 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S01Key1 PRIMARY KEY (S01_ID)) ; 

   CREATE UNIQUE INDEX S01UK1 ON S01HGAJ(TglPayr,NIP) ;

ALTER TABLE S01HGAJ
ALTER COLUMN TotAnak SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN TakeHomePay SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN TotInc SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN TotDed SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN GrossIncomeNBYTD SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN OccSupport1 SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN Col12YTD SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN EGIYNB SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN PTKP SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN EYTI SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN EYIT SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN YTDIT SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN IncTaxAPaidNB SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN GrossIncomeBYTD SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN OccSupport2 SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN TaxTotal SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN IncTaxAPaidB SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN Hari SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN AkmHari SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN TaxPesangonRp SET DEFAULT 0 ;
ALTER TABLE S01HGAJ
ALTER COLUMN Recs SET DEFAULT 0 ;


-- SUMMARY PAYROLL (DETAIL)
CREATE TABLE S02DGAJ(
   S02_ID SERIAL,
   TglPayr DATE NOT NULL,
   NIP VARCHAR(10) NOT NULL,
   FlgDpPt VARCHAR(1) NOT NULL,
   KdDpPt VARCHAR(4) NOT NULL,
   FlgAngs VARCHAR(1) NOT NULL,
   Singkatan VARCHAR(10) ,
   Nilai DECIMAL(15,2) ,
   KdCurr VARCHAR(4) ,
   NilaiVal DECIMAL(15,2) ,
   Kolom VARCHAR(2) ,
   NoAcc VARCHAR(10) ,
   UsComp VARCHAR(1) ,
   NoLyr DECIMAL(3,0) ,
   FlgNonGL INT ,
   EncNilai VARCHAR(100),
   EncNilaiVal VARCHAR(100),
   S01_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S02Key11 PRIMARY KEY (S02_ID)) ; 

   CREATE UNIQUE INDEX S02UK1 ON S02DGAJ (TglPayr,NIP,FlgDpPt,KdDpPt,FlgAngs) ;

create INDEX S02Key2 ON S02DGAJ(TglPayr,NIP) ;

ALTER TABLE S02DGAJ
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE S02DGAJ
ALTER COLUMN NilaiVal SET DEFAULT 0 ;
ALTER TABLE S02DGAJ
ALTER COLUMN NoLyr SET DEFAULT 0 ;
ALTER TABLE S02DGAJ
ALTER COLUMN FlgNonGL SET DEFAULT 0 ;

ALTER TABLE S02DGAJ ADD
   CONSTRAINT S02Key2 FOREIGN KEY (S01_ID )
   REFERENCES S01HGAJ(S01_ID )  ON DELETE CASCADE ;


-- SUMMARY PAJAK-TETAP (A1)
CREATE TABLE S03LTAX(
	S03_ID SERIAL,
	TglPayr DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	KdCaba VARCHAR(4) NOT NULL,
	FixIncomePYTD DECIMAL(15,2) ,
	OLDFixIncomePYTD DECIMAL(15,2) ,
	FixIncome DECIMAL(15,2) ,
	VarIncomePYTD DECIMAL(15,2) ,
	OLDVarIncomePYTD DECIMAL(15,2) ,
	VarIncome DECIMAL(15,2) ,
	Col2YTD DECIMAL(15,2) ,
	OLDCol2YTD DECIMAL(15,2) ,
	Col3YTD DECIMAL(15,2) ,
	OLDCol3YTD DECIMAL(15,2) ,
	Col4YTD DECIMAL(15,2) ,
	OLDCol4YTD DECIMAL(15,2) ,
	Col5YTD DECIMAL(15,2) ,
	OLDCol5YTD DECIMAL(15,2) ,
	Col6YTD DECIMAL(15,2) ,
	OLDCol6YTD DECIMAL(15,2) ,
	Col12PYTD DECIMAL(15,2) ,
	OLDCol12PYTD DECIMAL(15,2) ,
	Kolom12 DECIMAL(15,2) ,
	OccSupport1 DECIMAL(15,2) ,
	OLDOccSupport1 DECIMAL(15,2) ,
	EGIYNB DECIMAL(15,2) ,
	PTKP DECIMAL(15,2) ,
	EYTI DECIMAL(15,2) ,
	EYIT DECIMAL(15,2) ,
	YTDIT DECIMAL(15,2) ,
	IncTaxAPaidNB DECIMAL(15,2) ,
	OLDIncTaxAPaidNB DECIMAL(15,2) ,
	Col8PYTD DECIMAL(15,2) ,
	OLDCol8PYTD DECIMAL(15,2) ,
	Kolom8 DECIMAL(15,2) ,
	OccSupport2 DECIMAL(15,2) ,
	OLDOccSupport2 DECIMAL(15,2) ,
	EYITT DECIMAL(15,2) ,
	IncTaxAPaidB DECIMAL(15,2) ,
	OLDIncTaxAPaidB DECIMAL(15,2) ,
	TotPot DECIMAL(15,2) ,
	FlagTHR VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	Harian VARCHAR(1),
	FlgStruk VARCHAR(1),
	FlgPdLL VARCHAR(1),
	kdUMP VARCHAR(4),
	NilUMP DECIMAL(15,2),
	TaxUMP DECIMAL(15,2),
	TaxAPaidUMP DECIMAL(15,2),
	TaxUMPYTD DECIMAL(15,2),
	Hari INT,
	MaxBruto DECIMAL(15,2),
	PendDP   DECIMAL(15,2),
	EncFixIncomePYTD VARCHAR(100), 
	EncOLDFixIncomePYTD VARCHAR(100), 
	EncFixIncome VARCHAR(100), 
	EncVarIncomePYTD VARCHAR(100), 
	EncOLDVarIncomePYTD VARCHAR(100), 
	EncVarIncome VARCHAR(100), 
	EncCol2YTD VARCHAR(100), 
	EncOLDCol2YTD VARCHAR(100), 
	EncCol3YTD VARCHAR(100), 
	EncOLDCol3YTD VARCHAR(100), 
	EncCol4YTD VARCHAR(100), 
	EncOLDCol4YTD VARCHAR(100), 
	EncCol5YTD VARCHAR(100), 
	EncOLDCol5YTD VARCHAR(100), 
	EncCol6YTD VARCHAR(100), 
	EncOLDCol6YTD VARCHAR(100), 
	EncCol12PYTD VARCHAR(100), 
	EncOLDCol12PYTD VARCHAR(100), 
	EncKolom12 VARCHAR(100), 
	EncOccSupport1 VARCHAR(100), 
	EncOLDOccSupport1 VARCHAR(100), 
	EncEGIYNB VARCHAR(100), 
	EncPTKP VARCHAR(100), 
	EncEYTI VARCHAR(100), 
	EncEYIT VARCHAR(100), 
	EncYTDIT VARCHAR(100), 
	EncIncTaxAPaidNB VARCHAR(100), 
	EncOLDIncTaxAPaidNB VARCHAR(100), 
	EncCol8PYTD VARCHAR(100), 
	EncOLDCol8PYTD VARCHAR(100), 
	EncKolom8 VARCHAR(100), 
	EncOccSupport2 VARCHAR(100), 
	EncOLDOccSupport2 VARCHAR(100), 
	EncEYITT VARCHAR(100), 
	EncIncTaxAPaidB VARCHAR(100), 
	EncOLDIncTaxAPaidB VARCHAR(100), 
	EncTotPot VARCHAR(100), 
	EncNilUMP VARCHAR(100),
	EncTaxUMP VARCHAR(100),
	EncTaxAPaidUMP VARCHAR(100),
	EncTaxUMPYTD VARCHAR(100),
	EncMaxBruto VARCHAR(100),
	EncPendDP VARCHAR(100),
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S03Key1 PRIMARY KEY (S03_ID)) ; 

   CREATE UNIQUE INDEX S03UK1 ON S03LTAX (TglPayr,NIP,KdCaba) ;

ALTER TABLE S03LTAX
ALTER COLUMN FixIncomePYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDFixIncomePYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN FixIncome SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN VarIncomePYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDVarIncomePYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN VarIncome SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col2YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol2YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col3YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol3YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col4YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol4YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col5YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol5YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col6YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol6YTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col12PYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol12PYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Kolom12 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OccSupport1 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDOccSupport1 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN EGIYNB SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN PTKP SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN EYTI SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN EYIT SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN YTDIT SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN IncTaxAPaidNB SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDIncTaxAPaidNB SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Col8PYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDCol8PYTD SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN Kolom8 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OccSupport2 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDOccSupport2 SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN EYITT SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN IncTaxAPaidB SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN OLDIncTaxAPaidB SET DEFAULT 0 ;
ALTER TABLE S03LTAX
ALTER COLUMN TotPot SET DEFAULT 0 ;


-- SUMMARY PAJAK-FINAL (B)  
CREATE TABLE S0BLSTX(
	S0B_ID SERIAL,
	TglPayr DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	JnsPajak VARCHAR(1) NOT NULL,
	GrossIncPYTD DECIMAL(15,2) ,
	GrossIncCurrent DECIMAL(15,2) ,
	VariPYTD DECIMAL(15,2) ,
	VariCurrent DECIMAL(15,2) ,
	OccSupport DECIMAL(15,2) ,
	PTKP DECIMAL(15,2) ,
	IncomeTaxCurrent DECIMAL(15,2) ,
	IncomeTaxAPaid DECIMAL(15,2) ,
	TaxableIncCurrent DECIMAL(15,2) ,
	TaxableIncPYTD DECIMAL(15,2) ,
	BonusCurrent DECIMAL(15,2) ,
	BonusPYTD DECIMAL(15,2) ,
	PjBnsCurrent DECIMAL(15,2) ,
	PjBnsPYTD DECIMAL(15,2) ,
	IncomeTaxTtl DECIMAL(15,2) ,
	FlagTHR VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	EncGrossIncPYTD VARCHAR(100), 
	EncGrossIncCurrent VARCHAR(100), 
	EncVariPYTD VARCHAR(100), 
	EncVariCurrent VARCHAR(100), 
	EncOccSupport VARCHAR(100), 
	EncPTKP VARCHAR(100), 
	EncIncomeTaxCurrent VARCHAR(100), 
	EncIncomeTaxAPaid VARCHAR(100), 
	EncTaxableIncCurrent VARCHAR(100), 
	EncTaxableIncPYTD VARCHAR(100), 
	EncBonusCurrent VARCHAR(100), 
	EncBonusPYTD VARCHAR(100), 
	EncPjBnsCurrent VARCHAR(100), 
	EncPjBnsPYTD VARCHAR(100), 
	EncIncomeTaxTtl VARCHAR(100), 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0BKey1 PRIMARY KEY (S0B_ID)) ; 

   CREATE UNIQUE INDEX S0BUK1 ON S0BLSTX(TglPayr,NIP,JnsPajak) ;
   
ALTER TABLE S0BLSTX
ALTER COLUMN GrossIncPYTD SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN GrossIncCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN VariPYTD SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN VariCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN OccSupport SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN PTKP SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN IncomeTaxCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN IncomeTaxAPaid SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN TaxableIncCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN TaxableIncPYTD SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN BonusCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN BonusPYTD SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN PjBnsCurrent SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN PjBnsPYTD SET DEFAULT 0 ;
ALTER TABLE S0BLSTX
ALTER COLUMN IncomeTaxTtl SET DEFAULT 0 ;


-- SUMMARY LEMBUR PEGAWAI
CREATE TABLE S04LEMB(
	S04_ID SERIAL,
	TglPayr DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	Nama VARCHAR(25) ,
	KdArea VARCHAR(4) ,
	KdCaba VARCHAR(4) ,
	KdUUsa VARCHAR(4) ,
	KdUker VARCHAR(8) ,
	Area VARCHAR(20) ,
	Caba VARCHAR(40) ,
	UUsa VARCHAR(20) ,
	Uker VARCHAR(20) ,
	KdJaba VARCHAR(4) ,
	Skjaba VARCHAR(10) ,
	LembK1 DECIMAL(5,2) ,
	LembK2 DECIMAL(5,2) ,
	LembL1 DECIMAL(5,2) ,
	LembL2 DECIMAL(5,2) ,
	LembL3 DECIMAL(5,2) ,
	TtlLemb DECIMAL(5,2) ,
	Nilai DECIMAL(15,2) ,
	Perhitungan1 DECIMAL(15,2) ,
	Perhitungan2 DECIMAL(15,2) ,
	Perhitungan3 DECIMAL(15,2) ,
	DasarLembur VARCHAR(1) ,
	Pendek VARCHAR(1) ,
	PostId VARCHAR(12) ,
	PostDate DATE,
	UpdTime TIMESTAMP,
	LembI1 DECIMAL(5,2) ,
	LembI2 DECIMAL(5,2) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S04Key1 PRIMARY KEY (S04_ID)) ; 

   CREATE UNIQUE INDEX S04UK1 ON S04LEMB (TglPayr,NIP) ;

ALTER TABLE S04LEMB
ALTER COLUMN LembK1 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembK2 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembL1 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembL2 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembL3 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN TtlLemb SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN Perhitungan1 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN Perhitungan2 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN Perhitungan3 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembI1 SET DEFAULT 0 ;
ALTER TABLE S04LEMB
ALTER COLUMN LembI2 SET DEFAULT 0 ;



-- SUMMARY FILE PINDAH CABANG 
CREATE TABLE S0ESFPC(
	S0E_ID SERIAL,
	Tahun DECIMAL(4,0) NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	Cab01 VARCHAR(4) ,
	Cab02 VARCHAR(4) ,
	Cab03 VARCHAR(4) ,
	Cab04 VARCHAR(4) ,
	Cab05 VARCHAR(4) ,
	Cab06 VARCHAR(4) ,
	Cab07 VARCHAR(4) ,
	Cab08 VARCHAR(4) ,
	Cab09 VARCHAR(4) ,
	Cab10 VARCHAR(4) ,
	Cab11 VARCHAR(4) ,
	Cab12 VARCHAR(4) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0EKey1 PRIMARY KEY (S0E_ID)) ; 

   CREATE UNIQUE INDEX S0EUK1 ON S0ESFPC (Tahun,NIP) ;

ALTER TABLE S0ESFPC
ALTER COLUMN Tahun SET DEFAULT 0 ;


-------------> 01.08.2001
--*** MODIFIKASI PER 01 AGUSTUS 2001 ***--

-- SUMMARY MERGE PAYROLL TO G/L
CREATE TABLE Z01PTGL(
	Z01_ID SERIAL,
	JournalType VARCHAR(8) ,
	KdCabang VARCHAR(4) NOT NULL,
	KetCabang VARCHAR(20) ,
	Description VARCHAR(30) ,
	ApplyDate DATE,
	Document VARCHAR(16) NOT NULL,
	AccountCode VARCHAR(32) NOT NULL,
	Currency VARCHAR(8) ,
	Debit DECIMAL(15,2) ,
	Credit DECIMAL(15,2) ,
	Description2 VARCHAR(40) ,
	Hold INT ,
	Intercompany INT ,
	Reversing INT ,
	Repeating INT ,
	Recurring INT ,
	CaptureFlg INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT Z01Key1 PRIMARY KEY (Z01_ID)) ;

   CREATE UNIQUE INDEX Z01UK1 ON Z01PTGL (KdCabang,Document,AccountCode) ;

ALTER TABLE Z01PTGL
ALTER COLUMN Debit SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Credit SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Hold SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Intercompany SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Reversing SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Repeating SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN Recurring SET DEFAULT 0 ;
ALTER TABLE Z01PTGL
ALTER COLUMN CaptureFlg SET DEFAULT 0 ;

--<------------- 01.08.2001


--$$$$$ RELASI CROSS MODULE TERHADAP TABLE DI PAYROLL $$$$$--
-- DETAIL JABATAN
ALTER TABLE M05DJAB ADD
   CONSTRAINT M05Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- DETAIL KELOMPOK JABATAN
ALTER TABLE M07DKJB ADD
   CONSTRAINT M07Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- DETAIL CABANG
ALTER TABLE M09DCAB ADD
   CONSTRAINT M09Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- KLASIFIKASI PEGAWAI
ALTER TABLE M10KLAS ADD
   CONSTRAINT M10Key2 FOREIGN KEY (JnsPajak)
   REFERENCES M41JPJK(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
 
-- DETAIL GOLONGAN
ALTER TABLE M13DGOL ADD
   CONSTRAINT M13Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;




--*** MODULE HRD ***

-- ALASAN MUTASI
CREATE TABLE M24MUTR(
	KdMutr VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M24Key1 PRIMARY KEY (KdMutr)) ; 

-- JENIS PENDIDIKAN/TRAINING
CREATE TABLE M25JNSD(
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M25Key1 PRIMARY KEY (Kode)) ; 

-- JURUSAN PENDIDIKAN
CREATE TABLE M26JRSN(
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M26Key1 PRIMARY KEY (Kode)) ; 

-- LEMBAGA PENDIDIKAN
CREATE TABLE M27LMBD(
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	KaLembaga VARCHAR(30) ,
	Alamat VARCHAR(40) ,
	Kota VARCHAR(25) ,
	Telfon VARCHAR(15) ,
	Fax VARCHAR(25) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M27Key1 PRIMARY KEY (Kode)) ; 

-- LOKASI PENDIDIKAN 
CREATE TABLE M28LKSD(
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M28Key1 PRIMARY KEY (Kode)) ; 


-- JENIS ABSEN/CUTI
CREATE TABLE M29JNSA(
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	JnsCuti INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M29Key1 PRIMARY KEY (Kode)) ; 

   CREATE UNIQUE INDEX M29UK1 ON M29JNSA (Kode) ;

ALTER TABLE M29JNSA
ALTER COLUMN JnsCuti SET DEFAULT 0 ;

-- JENIS PENGHARGAAN/HUKUMAN
CREATE TABLE M30HAHU(
	KdHarg VARCHAR(4) NOT NULL,
	Nama VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M30Key1 PRIMARY KEY (KdHarg)) ;

-- JENIS FASILITAS
CREATE TABLE M31FASL(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(20) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M31Key1 PRIMARY KEY (Kode)) ; 

   CREATE UNIQUE INDEX M31UK1 ON M31FASL (Kode) ;


-- JENIS MEDICAL 
CREATE TABLE M32JMED(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(30) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M32Key1 PRIMARY KEY (Kode)) ; 

-- JENIS HOBI
CREATE TABLE M34HOBI(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(30) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M34Key1 PRIMARY KEY (Kode)) ;

   CREATE UNIQUE INDEX M34UK1 ON M34HOBI (Kode) ;


-- JENIS BAHASA
CREATE TABLE M36JBHS(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(30) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M36Key1 PRIMARY KEY (Kode)) ; 

-- TIPE SUPPLIER
CREATE TABLE M42TSPL(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M42Key1 PRIMARY KEY (Kode)) ; 

-- SUPPLIER
CREATE TABLE M43SUPL(
	Kode VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Alamat VARCHAR(40) ,
	Kota VARCHAR(25) ,
	KodePos VARCHAR(5) ,
	NoTelpon VARCHAR(15) ,
	TipeSupplier VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M43Key1 PRIMARY KEY (Kode)) ; 

create INDEX M43Key2 ON M43SUPL(TipeSupplier) ;

ALTER TABLE M43SUPL ADD
   CONSTRAINT M43Key2 FOREIGN KEY (TipeSupplier)
   REFERENCES M42TSPL(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- PARAMETER CUTI
CREATE TABLE M48PCUT(
	Kode VARCHAR(2) NOT NULL,
	Jatah DECIMAL(4,1) ,
	MaxSisa DECIMAL(4,1) ,
	Jenis VARCHAR(4) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	Keterangan VARCHAR(100) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M48Key1 PRIMARY KEY (Kode)) ; 

ALTER TABLE M48PCUT
ALTER COLUMN Jatah SET DEFAULT 0 ;
ALTER TABLE M48PCUT
ALTER COLUMN MaxSisa SET DEFAULT 0 ;


--- @@@@@@@@@@@@@ ---

-- HOBI PER NIP
CREATE TABLE M35HOBI(
   M35_ID SERIAL,
   NIP VARCHAR(10) NOT NULL,
   Kode VARCHAR(4) NOT NULL,
   Keterangan VARCHAR(30) ,
   Userid VARCHAR(12) ,
   UpdDate DATE,
   UpdTime TIMESTAMP,
   Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M35Key1 PRIMARY KEY (M35_ID)) ; 

   CREATE UNIQUE INDEX M35UK1 ON M35HOBI (NIP,Kode) ;

create INDEX M35Key2 ON M35HOBI(NIP) ;
create INDEX M35Key3 ON M35HOBI(Kode) ;

ALTER TABLE M35HOBI ADD
   CONSTRAINT M35Key2 FOREIGN KEY (Nip) 
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M35HOBI ADD
   CONSTRAINT M35Key3 FOREIGN KEY (Kode)
   REFERENCES M34HOBI(Kode)  ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- BAHASA PER NIP
CREATE TABLE M37NBHS(
	M37_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Kode VARCHAR(4) NOT NULL,
	Kemampuan VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M37Key1 PRIMARY KEY (M37_ID)) ;

   CREATE UNIQUE INDEX M37UK1 ON M37NBHS (NIP,Kode) ;

create INDEX M37Key2 ON M37NBHS(NIP) ;
create INDEX M37Key3 ON M37NBHS(Kode) ;

-- '1'=Aktif, '2'=Pasif
ALTER TABLE M37NBHS
ADD CONSTRAINT C_M37Kemampuan CHECK(Kemampuan IN ('1', '2')) ;

ALTER TABLE M37NBHS ADD
   CONSTRAINT M37Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE M37NBHS ADD
   CONSTRAINT M37Key3 FOREIGN KEY (Kode)
   REFERENCES M36JBHS(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- PENGALAMAN KERJA PER NIP
CREATE TABLE M38PKRJ(
	M38_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Perusahaan VARCHAR(30) ,
	TglMasuk DATE NOT NULL,
	TglKeluar DATE,
	JenisUsaha VARCHAR(20) ,
	Jabatan VARCHAR(20) ,
	Gaji DECIMAL(15,2) ,
	Alasan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M38Key1 PRIMARY KEY (M38_ID)) ;

   CREATE UNIQUE INDEX M38UK1 ON M38PKRJ (NIP,TglMasuk) ;

create INDEX M38Key2 ON M38PKRJ(NIP) ;

ALTER TABLE M38PKRJ
ALTER COLUMN Gaji SET DEFAULT 0  ;

ALTER TABLE M38PKRJ ADD
   CONSTRAINT M38Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TINGKAT PENDIDIKAN PER NIP
CREATE TABLE M39TPDK(
	M39_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tanggal DATE NOT NULL,
	Tingkatan VARCHAR(20) ,
	Bidang VARCHAR(20) ,
	Keterangan VARCHAR(30) ,
	LamaThn DECIMAL(3,0) ,
	LamaBln DECIMAL(4,2) ,
	Ijasah INT ,
	Formal INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M39Key1 PRIMARY KEY (M39_ID)) ; 

   CREATE UNIQUE INDEX M39UK1 ON M39TPDK (NIP,Tanggal) ;

create INDEX M39Key2 ON M39TPDK(NIP) ;

ALTER TABLE M39TPDK
ALTER COLUMN LamaThn SET DEFAULT 0 ;
ALTER TABLE M39TPDK
ALTER COLUMN LamaBln SET DEFAULT 0 ;
ALTER TABLE M39TPDK
ALTER COLUMN Ijasah SET DEFAULT 0 ;
ALTER TABLE M39TPDK
ALTER COLUMN Formal SET DEFAULT 0 ;

ALTER TABLE M39TPDK ADD
   CONSTRAINT M39Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- JUDUL FORMAT PREPRINTED MUTASI KARIR
CREATE TABLE M51JFRM(
	KdJFrm VARCHAR(4) NOT NULL,
	Keterangan VARCHAR(40) ,
	Teks VARCHAR(100) ,
	PrnFasi VARCHAR(1) ,
	KdFasi1 VARCHAR(4) ,
	KdFasi2 VARCHAR(4) ,
	KdFasi3 VARCHAR(4) ,
	KdFasi4 VARCHAR(4) ,
	TxFasi1 VARCHAR(30) ,
	TxFasi2 VARCHAR(30) ,
	TxFasi3 VARCHAR(30) ,
	TxFasi4 VARCHAR(30) ,
	PrnPlaf VARCHAR(1) ,
	KdMedi1 VARCHAR(4) ,
	KdMedi2 VARCHAR(4) ,
	KdMedi3 VARCHAR(4) ,
	KdMedi4 VARCHAR(4) ,
	TxMedi1 VARCHAR(30) ,
	TxMedi2 VARCHAR(30) ,
	TxMedi3 VARCHAR(30) ,
	TxMedi4 VARCHAR(30) ,
	ApprBy1 VARCHAR(30) ,
	ApprBy2 VARCHAR(30) ,
	ApprBy3 VARCHAR(30) ,
	ApprBy4 VARCHAR(30) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M51Key1 PRIMARY KEY (KdJFrm)) ; 

create INDEX M51Key2 ON M51JFRM(KdFasi1) ;
create INDEX M51Key3 ON M51JFRM(KdFasi2) ;
create INDEX M51Key4 ON M51JFRM(KdFasi3) ;
create INDEX M51Key5 ON M51JFRM(KdFasi4) ;
create INDEX M51Key6 ON M51JFRM(KdMedi1) ;
create INDEX M51Key7 ON M51JFRM(KdMedi2) ;
create INDEX M51Key8 ON M51JFRM(KdMedi3) ;
create INDEX M51Key9 ON M51JFRM(KdMedi4) ;
--   CHECK(PrnFasi IN ('Y', 'T')),
--   CHECK(PrnPlaf IN ('Y', 'T')),

-- HEADER FORMAT PREPRINTED MUTASI KARIR
CREATE TABLE M52HFRM(
	M52_ID SERIAL,
	KdJFrm VARCHAR(4) NOT NULL,
	NomFormat DECIMAL(4,0) NOT NULL,
	Keterangan VARCHAR(40) ,
	FlgDpPt VARCHAR(1) ,
	CtkBold VARCHAR(1) ,
	CtkItalic VARCHAR(1) ,
	CtkUline VARCHAR(1) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M52Key1 PRIMARY KEY (M52_ID)) ; 

   CREATE UNIQUE INDEX M52UK1 ON M52HFRM(KdJFrm,NomFormat) ;

create INDEX M52Key2 ON M52HFRM(KdJFrm) ;

ALTER TABLE M52HFRM
ADD CONSTRAINT C_M52FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;
ALTER TABLE M52HFRM
ADD CONSTRAINT C_M52CtkBold CHECK(CtkBold IN ('Y', 'T')) ;
ALTER TABLE M52HFRM
ADD CONSTRAINT C_M52CtkItalic CHECK(CtkItalic IN ('Y', 'T')) ;
ALTER TABLE M52HFRM
ADD CONSTRAINT C_M52CtkUline CHECK(CtkUline IN ('Y', 'T')) ;

ALTER TABLE M52HFRM
ALTER COLUMN NomFormat SET DEFAULT 0 ;
ALTER TABLE M52HFRM
ALTER COLUMN Recs SET DEFAULT 0 ;
ALTER TABLE M52HFRM
ALTER COLUMN FlgDpPt SET DEFAULT 'D' ;
ALTER TABLE M52HFRM
ALTER COLUMN CtkBold SET DEFAULT 'Y' ;
ALTER TABLE M52HFRM
ALTER COLUMN CtkItalic SET DEFAULT 'Y' ;
ALTER TABLE M52HFRM
ALTER COLUMN CtkUline SET DEFAULT 'Y' ;

ALTER TABLE M52HFRM ADD
   CONSTRAINT M52Key2 FOREIGN KEY (KdJFrm)
   REFERENCES M51JFRM(KdJFrm) ON UPDATE RESTRICT ON DELETE RESTRICT ; 

-- DETAIL FORMAT PREPRINTED MUTASI KARIR
CREATE TABLE M53DFRM(
	M53_ID SERIAL,
	KdJFrm VARCHAR(4) NOT NULL,
	NomFormat DECIMAL(4,0) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	FlgAngs VARCHAR(1) NOT NULL,
	M52_ID INTEGER, 
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M53Key1 PRIMARY KEY (M53_ID)) ;

   CREATE UNIQUE INDEX M53UK1 ON M53DFRM(KdJFrm,NomFormat,FlgDpPt,KdDpPt,FlgAngs) ;

create INDEX M53Key2 ON M53DFRM(M52_ID) ;
create INDEX M53Key3 ON M53DFRM(M03_ID) ;

--   CHECK(FlgDpPt IN ('D=Pendapatan', 'P=Potongan')),
--   CHECK(FlgAngs IN ('A=Angsuran Pokok', 'B=Angsuran Bunga', ' =Bukan Angsuran')),

ALTER TABLE M53DFRM
ADD CONSTRAINT C_M53FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;
ALTER TABLE M53DFRM
ADD CONSTRAINT C_M53FlgAngs CHECK(FlgAngs IN ('A', 'B', ' ')) ;

ALTER TABLE M53DFRM
ALTER COLUMN NomFormat SET DEFAULT 0 ;
ALTER TABLE M53DFRM
ALTER COLUMN FlgDpPt SET DEFAULT 'D' ;
ALTER TABLE M53DFRM
ALTER COLUMN FlgAngs SET DEFAULT ' ' ;

ALTER TABLE M53DFRM ADD
   CONSTRAINT M53Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

ALTER TABLE M53DFRM ADD
   CONSTRAINT M53Key2 FOREIGN KEY (M52_ID)
   REFERENCES M52HFRM(M52_ID)
	ON DELETE CASCADE  ;


-- TRANSAKSI ABSEN/CUTI
CREATE TABLE T08ABSN(
	T08_ID SERIAL,
	TgDocu DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	KdAbsn VARCHAR(4) NOT NULL,
	CutiTahun DECIMAL(4,0) ,
	JamAbsn DECIMAL(3,2) ,
	HariAbsn DECIMAL(3,1) ,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T08Key1 PRIMARY KEY (T08_ID)) ; 

   CREATE UNIQUE INDEX T08UK1 ON T08ABSN(TgDocu,NIP,KdAbsn) ;

create INDEX T08Key2 ON T08ABSN(NIP) ;
create INDEX T08Key3 ON T08ABSN(KdAbsn) ;

ALTER TABLE T08ABSN
ALTER COLUMN CutiTahun SET DEFAULT 0 ;
ALTER TABLE T08ABSN
ALTER COLUMN JamAbsn SET DEFAULT 0 ;
ALTER TABLE T08ABSN
ALTER COLUMN HariAbsn SET DEFAULT 0 ;

ALTER TABLE T08ABSN ADD
   CONSTRAINT T08Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T08ABSN ADD
   CONSTRAINT T08Key3 FOREIGN KEY (KdAbsn)
   REFERENCES M29JNSA(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PENGHARGAAN/HUKUMAN
CREATE TABLE T09HARG(
	T09_ID SERIAL,
	RID VARCHAR(1) NOT NULL,
	TglEntry DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	KdHarg VARCHAR(4) NOT NULL,
	TglEff DATE,
	NoSK VARCHAR(25) ,
	TglSK DATE,
	Durasi VARCHAR(10) ,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T09Key1 PRIMARY KEY (T09_ID)) ; 

   CREATE UNIQUE INDEX T09UK1 ON T09HARG(RID,TglEntry,NIP,KdHarg) ;

create INDEX T09Key2 ON T09HARG(NIP) ;
create INDEX T09Key3 ON T09HARG(KdHarg) ;

-- 'H'=Hukuman, 'P'=Penghargaan
ALTER TABLE T09HARG
ADD CONSTRAINT C_T09RID CHECK(RID IN ('H', 'P')) ;

ALTER TABLE T09HARG ADD
   CONSTRAINT T09Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ; 
ALTER TABLE T09HARG ADD
   CONSTRAINT T09Key3 FOREIGN KEY (KdHarg)
   REFERENCES M30HAHU(KdHarg) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI MUTASI/KARIR
CREATE TABLE T10MUTA(
	T10_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	TglEff DATE NOT NULL,
	NoSK VARCHAR(25) ,
	KdMutr VARCHAR(4) ,
	Keterangan VARCHAR(100) ,
	KdKlas VARCHAR(4) ,
	KdCaba VARCHAR(4) ,
	KdUUsa VARCHAR(4) ,
	KdUKer VARCHAR(8) ,
	KdGlng VARCHAR(4) ,
	KdJaba VARCHAR(4) ,
	KdArea VARCHAR(4) ,
	KdKJab VARCHAR(4) ,
	PrdPelks DATE,
	GajiPokok DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Penilaian VARCHAR(2) ,
	MasaKerja INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	PRN INT ,	
	Keterangan2 VARCHAR(100) ,
	Keterangan3 VARCHAR(100) ,
	Keterangan4 VARCHAR(100) ,
	Keterangan5 VARCHAR(100) ,
	M04_ID INTEGER,
	M06_ID INTEGER,
	M08_ID INTEGER,
	M12_ID INTEGER,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T10Key1 PRIMARY KEY (T10_ID)) ; 

   CREATE UNIQUE INDEX T10UK1 ON T10MUTA(NIP,TglEff) ;

create INDEX T10Key2 ON T10MUTA(NIP) ;
create INDEX T10Key3 ON T10MUTA(KdCurr) ;
create INDEX T10Key4 ON T10MUTA(KdMutr) ;
create INDEX T10Key5 ON T10MUTA(KdKlas) ;
create INDEX T10Key6 ON T10MUTA(M08_ID) ;
create INDEX T10Key7 ON T10MUTA(KdUUsa) ;
create INDEX T10Key8 ON T10MUTA(KdUKer) ;
create INDEX T10Key9 ON T10MUTA(M12_ID) ;
create INDEX T10Key10 ON T10MUTA(M04_ID) ;
create INDEX T10Key11 ON T10MUTA(KdArea) ;
create INDEX T10Key12 ON T10MUTA(M06_ID) ;

-- 'BS'=Baik Sekali, 'BK'=Baik, 'CP'=Cukup, 'KG'=Kurang, 'KS'=Kurang Sekali, 'TP'=Tidak Ada Penilaian
ALTER TABLE T10MUTA
ADD CONSTRAINT C_T10Penilaian CHECK(Penilaian IN ('BS', 'BK', 'CP', 'KG', 'KS', 'TP')) ; 
 
ALTER TABLE T10MUTA
ALTER COLUMN GajiPokok SET DEFAULT 0 ;
ALTER TABLE T10MUTA
ALTER COLUMN MasaKerja SET DEFAULT 0 ;

ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key3 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key4 FOREIGN KEY (KdMutr)
   REFERENCES M24MUTR(KdMutr) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key5 FOREIGN KEY (KdKlas)
   REFERENCES M10KLAS(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key6 FOREIGN KEY (M08_ID)
   REFERENCES M08HCAB(M08_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key7 FOREIGN KEY (KdUUsa)
   REFERENCES M02UUSA(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key8 FOREIGN KEY (KdUKer)
   REFERENCES M17UKER(KdUker) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key9 FOREIGN KEY (M12_ID)
   REFERENCES M12HGOL(M12_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key10 FOREIGN KEY (M04_ID)
   REFERENCES M04HJAB(M04_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key11 FOREIGN KEY (KdArea)
   REFERENCES M01AREA(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T10MUTA ADD
   CONSTRAINT T10Key12 FOREIGN KEY (M06_ID)
   REFERENCES M06HKJB(M06_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PELATIHAN/TRAINING (HEADER)
CREATE TABLE T11HTRN(
	T11_ID SERIAL,
	TgDocu DATE NOT NULL,
	KdJnsD VARCHAR(4) NOT NULL,
	KdJrsn VARCHAR(4) NOT NULL,
	KdLmbD VARCHAR(4) ,
	KdLksD VARCHAR(4) ,
	HariTrng DECIMAL(4,2) ,
	BulanTrng DECIMAL(3,0) ,
	Biaya DECIMAL(15,2) ,
	NomorSK VARCHAR(25) ,
	TglSK DATE,
	Tingkatan VARCHAR(1) ,
	Recs DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T11Key1 PRIMARY KEY (T11_ID)) ; 

   CREATE UNIQUE INDEX T11UK1 ON T11HTRN(TgDocu,KdJnsD,KdJrsn) ;

create INDEX T11Key2 ON T11HTRN(KdJrsn) ;
create INDEX T11Key3 ON T11HTRN(KdJnsD) ;
create INDEX T11Key4 ON T11HTRN(KdLmbD) ;
create INDEX T11Key5 ON T11HTRN(KdLksD) ;

-- ' '=Kursus, '1'=Seminar, '2'=SD, '3'=SMP, '4'=SMA, '5'=D3, '6'=S1, '7'=S2, '8'=S3
ALTER TABLE T11HTRN
ADD CONSTRAINT C_T11Tingkatan CHECK(Tingkatan IN (' ', '1', '2', '3', '4', '5', '6', '7', '8')) ;

ALTER TABLE T11HTRN
ALTER COLUMN HariTrng SET DEFAULT 0 ;
ALTER TABLE T11HTRN
ALTER COLUMN BulanTrng SET DEFAULT 0 ;
ALTER TABLE T11HTRN
ALTER COLUMN Biaya SET DEFAULT 0 ;
ALTER TABLE T11HTRN
ALTER COLUMN Recs SET DEFAULT 0 ;

ALTER TABLE T11HTRN ADD
   CONSTRAINT T11Key2 FOREIGN KEY (KdJrsn)
   REFERENCES M26JRSN(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T11HTRN ADD
   CONSTRAINT T11Key3 FOREIGN KEY (KdJnsD)
   REFERENCES M25JNSD(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T11HTRN ADD
   CONSTRAINT T11Key4 FOREIGN KEY (KdLmbD)
   REFERENCES M27LMBD(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T11HTRN ADD
   CONSTRAINT T11Key5 FOREIGN KEY (KdLksD)
   REFERENCES M28LKSD(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PELATIHAN/TRAINING (DETAIL)
CREATE TABLE T12DTRN(
	T12_ID SERIAL,
	TgDocu DATE NOT NULL,
	KdJnsD VARCHAR(4) NOT NULL,
	KdJrsn VARCHAR(4) NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	Hasil VARCHAR(10) ,
	Nilai VARCHAR(2) ,
	NoIjaz VARCHAR(25) ,
	BiayaSendiri INT ,
	T11_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T12Key1 PRIMARY KEY (T12_ID)); 

   CREATE UNIQUE INDEX T12UK1 ON T12DTRN(TgDocu,KdJnsD,KdJrsn,NIP) ;

create INDEX T12Key2 ON T12DTRN(T11_ID) ;
create INDEX T12Key3 ON T12DTRN(NIP) ;

ALTER TABLE T12DTRN
ALTER COLUMN BiayaSendiri SET DEFAULT 0  ;

ALTER TABLE T12DTRN ADD
   CONSTRAINT T12Key2 FOREIGN KEY (T11_ID)
   REFERENCES T11HTRN(T11_ID) ON DELETE CASCADE ;
ALTER TABLE T12DTRN ADD
   CONSTRAINT T12Key3 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI FASILITAS
CREATE TABLE T13FASI(
	T13_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	TglDiberi DATE NOT NULL,
	KdFasi VARCHAR(4) NOT NULL,
	TglKembali DATE,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T13Key1 PRIMARY KEY (T13_ID)) ;

   CREATE UNIQUE INDEX T13UK1 ON T13FASI(NIP,TglDiberi,KdFasi) ;

create INDEX T13Key2 ON T13FASI(NIP) ; 
create INDEX T13Key3 ON T13FASI(KdFasi) ; 

ALTER TABLE T13FASI ADD
   CONSTRAINT T13Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T13FASI ADD
   CONSTRAINT T13Key3 FOREIGN KEY (KdFasi)
   REFERENCES M31FASL(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI JATAH MEDICAL-1
CREATE TABLE T14JTHM(
	T14_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JatahMedical DECIMAL(15,2) ,
	Pemakaian DECIMAL(15,2) ,
	SifatJatah VARCHAR(1) ,
	JatahBulanan DECIMAL(15,2) ,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T14Key1 PRIMARY KEY (T14_ID)) ; 

   CREATE UNIQUE INDEX T14UK1 ON T14JTHM(NIP,Tahun) ;

create INDEX T14Key2 ON T14JTHM(NIP) ;

-- 'T'=Tahunan, 'B'=Bulanan
ALTER TABLE T14JTHM
ADD CONSTRAINT C_T14SifatJatah CHECK(SifatJatah IN ('T', 'B')) ;

ALTER TABLE T14JTHM
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE T14JTHM
ALTER COLUMN JatahMedical SET DEFAULT 0 ;
ALTER TABLE T14JTHM
ALTER COLUMN Pemakaian SET DEFAULT 0 ;
ALTER TABLE T14JTHM
ALTER COLUMN JatahBulanan SET DEFAULT 0 ;

ALTER TABLE T14JTHM ADD
   CONSTRAINT T14Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PEMAKAIAN MEDICAL-1
CREATE TABLE T15PMED(
	T15_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) ,
	Tanggal DATE NOT NULL,
	Keterangan VARCHAR(40) ,
	JenisMedical VARCHAR(4) ,
	Pemakaian DECIMAL(15,2) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	T14_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T15Key1 PRIMARY KEY (T15_ID)) ;

   CREATE UNIQUE INDEX T15UK1 ON T15PMED(NIP,Tanggal) ;

create INDEX T15Key2 ON T15PMED(T14_ID) ;
create INDEX T15Key3 ON T15PMED(JenisMedical) ;

ALTER TABLE T15PMED
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE T15PMED
ALTER COLUMN Pemakaian SET DEFAULT 0 ;

ALTER TABLE T15PMED ADD
   CONSTRAINT T15Key2 FOREIGN KEY (T14_ID)
   REFERENCES T14JTHM(T14_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T15PMED ADD
   CONSTRAINT T15Key3 FOREIGN KEY (JenisMedical)
   REFERENCES M32JMED(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI JATAH MEDICAL-2 PER JENIS & KEL.JABATAN
CREATE TABLE T20JTMJ(
	T20_ID SERIAL,
	Tahun DECIMAL(4,0) NOT NULL,
	JenisMedical VARCHAR(4) NOT NULL,
	KelJab VARCHAR(4) NOT NULL,
	Plafon DECIMAL(15,2) ,
	PlafonKel DECIMAL(15,2) ,
	Keterangan VARCHAR(30) ,
	FlagKasus INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M06_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T20Key1 PRIMARY KEY (T20_ID)) ; 

   CREATE UNIQUE INDEX T20UK1 ON T20JTMJ(Tahun,JenisMedical,KelJab) ;

create INDEX T20Key2 ON T20JTMJ(JenisMedical) ;
create INDEX T20Key3 ON T20JTMJ(M06_ID) ;

ALTER TABLE T20JTMJ
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE T20JTMJ
ALTER COLUMN Plafon SET DEFAULT 0 ;
ALTER TABLE T20JTMJ
ALTER COLUMN PlafonKel SET DEFAULT 0 ;
ALTER TABLE T20JTMJ
ALTER COLUMN FlagKasus SET DEFAULT 0 ;

ALTER TABLE T20JTMJ ADD
   CONSTRAINT T20Key2 FOREIGN KEY (JenisMedical)
   REFERENCES M32JMED(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T20JTMJ ADD
   CONSTRAINT T20Key3 FOREIGN KEY (M06_ID)
   REFERENCES M06HKJB(M06_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;


-- TRANSAKSI PEMAKAIAN MEDICAL-2 PER JENIS MEDICAL
CREATE TABLE T21PMEP(
	T21_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JenisMedical VARCHAR(4) NOT NULL,
	Tanggal DATE NOT NULL,
	FlagKel INT NOT NULL,
	NamaKel VARCHAR(25) NOT NULL,
	KdSupl VARCHAR(4) NOT NULL,
	Pemakaian DECIMAL(15,2) ,
	Keterangan VARCHAR(40) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T21Key1 PRIMARY KEY (T21_ID)) ; 

   CREATE UNIQUE INDEX T21UK1 ON T21PMEP(NIP,Tanggal,Tahun,JenisMedical,FlagKel,NamaKel,KdSupl) ;

create INDEX T21Key2 ON T21PMEP(NIP) ;
create INDEX T21Key3 ON T21PMEP(JenisMedical) ;
create INDEX T21Key4 ON T21PMEP(NIP,Tahun,JenisMedical,Tanggal) ;
create INDEX T21Key5 ON T21PMEP(NIP,Tanggal,Tahun,JenisMedical,FlagKel,NamaKel,KdSupl) ;

ALTER TABLE T21PMEP
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE T21PMEP
ALTER COLUMN FlagKel SET DEFAULT 0 ;
ALTER TABLE T21PMEP
ALTER COLUMN Pemakaian SET DEFAULT 0 ;

ALTER TABLE T21PMEP ADD
   CONSTRAINT T21Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;
ALTER TABLE T21PMEP ADD
   CONSTRAINT T21Key3 FOREIGN KEY (JenisMedical)
   REFERENCES M32JMED(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;

CREATE TABLE T27PMEP(
	T27_ID SERIAL, 
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JenisMedical VARCHAR(4) NOT NULL,
	Tanggal DATE NOT NULL,
	FlagKel INT NOT NULL,
	NamaKel VARCHAR(25) NOT NULL,
	KdSupl VARCHAR(4) NOT NULL,
	CrtPiutang VARCHAR(1) ,
	TglAngs1 DATE,
	NlMed2Piut DECIMAL(15,2) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT T27Key1 PRIMARY KEY (T27_ID));

   CREATE UNIQUE INDEX T27UK1 ON T27PMEP(NIP,Tanggal,Tahun,JenisMedical,FlagKel,NamaKel,KdSupl) ;

-- SUMMARY HISTORY ABSEN
CREATE TABLE S06ABSH(
	S06_ID SERIAL,
	Tanggal DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	KdAbsn VARCHAR(4) NOT NULL,
	SkAbsn VARCHAR(30) ,
	JamAbsn DECIMAL(4,2) ,
	HariAbsn DECIMAL(3,1) ,
	PostId VARCHAR(12) ,
	PostDate DATE,
	UpdTime TIMESTAMP,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S06Key1 PRIMARY KEY (S06_ID)) ; 

   CREATE UNIQUE INDEX S06UK1 ON S06ABSH(Tanggal,NIP,KdAbsn) ;

ALTER TABLE S06ABSH
ALTER COLUMN JamAbsn SET DEFAULT 0 ;
ALTER TABLE S06ABSH
ALTER COLUMN HariAbsn SET DEFAULT 0 ;

-- SUMMARY HISTORY TRAINING
CREATE TABLE S07TRNG(
	S07_ID SERIAL,
	Tanggal DATE NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	KdJnsd VARCHAR(4) NOT NULL,
	SkJnsD VARCHAR(10) ,
	KdJrsn VARCHAR(4) NOT NULL,
	SkJrsn VARCHAR(10) ,
	KdLmbD VARCHAR(4) ,
	SkLmbD VARCHAR(10) ,
	KdLksD VARCHAR(4) ,
	SkLksD VARCHAR(10) ,
	BulanTrng DECIMAL(3,0) ,
	HariTrng DECIMAL(4,2) ,
	Hasil VARCHAR(10) ,
	Nilai VARCHAR(2) ,
	BiayaSendiri INT ,
	Biaya DECIMAL(15,2) ,
	NoIjaz VARCHAR(25) ,
	PostId VARCHAR(12) ,
	PostDate DATE,
	UpdTime TIMESTAMP,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S07Key1 PRIMARY KEY (S07_ID)) ; 

   CREATE UNIQUE INDEX S07UK1 ON S07TRNG(Tanggal,NIP,KdJnsd,KdJrsn) ;

ALTER TABLE S07TRNG
ALTER COLUMN BulanTrng SET DEFAULT 0 ;
ALTER TABLE S07TRNG
ALTER COLUMN HariTrng SET DEFAULT 0 ;
ALTER TABLE S07TRNG
ALTER COLUMN BiayaSendiri SET DEFAULT 0 ;
ALTER TABLE S07TRNG
ALTER COLUMN Biaya SET DEFAULT 0 ;

-- SUMMARY HISTORY MUTASI/KARIR
CREATE TABLE S08MUTA(
	S08_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	KdMutr VARCHAR(4) NOT NULL,
	SkMutr VARCHAR(10) ,
	NoSK VARCHAR(25) ,
	TglEff DATE NOT NULL,
	Keterangan VARCHAR(100) ,
	KdKlas VARCHAR(4) ,
	SkKlas VARCHAR(10) ,
	KdCaba VARCHAR(4) ,
	SkCaba VARCHAR(10) ,
	KdUUsa VARCHAR(4) ,
	SkUUsa VARCHAR(10) ,
	KdUKer VARCHAR(8) ,
	SkUKer VARCHAR(10) ,
	KdGlng VARCHAR(4) ,
	SkGlng VARCHAR(10) ,
	KdJaba VARCHAR(4) ,
	SkJaba VARCHAR(10) ,
	KdArea VARCHAR(4) ,
	SkArea VARCHAR(10) ,
	KdKJab VARCHAR(4) ,
	SkKJab VARCHAR(10) ,
	PrdPelks DATE,
	KdCurr VARCHAR(4) ,
	GajiPokok DECIMAL(15,2) ,
	Penilaian VARCHAR(2) ,
	MasaKerja INT ,
	PostId VARCHAR(12) ,
	PostDate DATE,
	UpdTime TIMESTAMP,
	EncGajiPokok VARCHAR(100),
	Keterangan2 VARCHAR(100) ,
	Keterangan3 VARCHAR(100) ,
	Keterangan4 VARCHAR(100) ,
	Keterangan5 VARCHAR(100) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S08Key1 PRIMARY KEY (S08_ID)) ;

   CREATE UNIQUE INDEX S08UK1 ON S08MUTA(TglEff,NIP,KdMutr) ;

ALTER TABLE S08MUTA
ALTER COLUMN GajiPokok SET DEFAULT 0 ;
ALTER TABLE S08MUTA
ALTER COLUMN MasaKerja SET DEFAULT 0 ;


-- SUMMARY HISTORY CUTI (HEADER)
CREATE TABLE S09HCUT(
	S09_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JatahCuti DECIMAL(4,1) ,
	Pemakaian DECIMAL(4,1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	keterangan VARCHAR(100), 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S09Key1 PRIMARY KEY (S09_ID)) ;

   CREATE UNIQUE INDEX S09UK1 ON S09HCUT(NIP,Tahun) ;

ALTER TABLE S09HCUT
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE S09HCUT
ALTER COLUMN JatahCuti SET DEFAULT 0 ;
ALTER TABLE S09HCUT
ALTER COLUMN Pemakaian SET DEFAULT 0 ;


-- SUMMARY HISTORY CUTI (DETAIL)
CREATE TABLE S0ADCUT(
	S0A_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	BlnTgl VARCHAR(4) NOT NULL,
	KdCuti VARCHAR(4) NOT NULL,
	Pemakaian DECIMAL(3,1) ,
	S09_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0AKey1 PRIMARY KEY (S0A_ID)) ;

   CREATE UNIQUE INDEX S0AUK1 ON S0ADCUT(NIP,Tahun,BlnTgl,KdCuti) ;

create INDEX S0AKey2 ON S0ADCUT(S09_ID) ;

ALTER TABLE S0ADCUT
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE S0ADCUT
ALTER COLUMN Pemakaian SET DEFAULT 0 ;

ALTER TABLE S0ADCUT ADD
   CONSTRAINT S0AKey2 FOREIGN KEY (S09_ID)
   REFERENCES S09HCUT(S09_ID) ON DELETE CASCADE ;



-- SUMMARY PEMAKAIAN MEDICAL PER NIP-JENIS MEDICAL (HEADER)
CREATE TABLE S0CMEDH(
	S0C_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JenisMedical VARCHAR(4) NOT NULL,
	JatahMedical DECIMAL(15,2) ,
	JatahMedicalKel DECIMAL(15,2) ,
	Pemakaian DECIMAL(15,2) ,
	PemakaianKel DECIMAL(15,2) ,
	PemakaianKelOvr DECIMAL(15,2) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0CKey1 PRIMARY KEY (S0C_ID)) ; 

   CREATE UNIQUE INDEX S0CUK1 ON S0CMEDH(NIP,Tahun,JenisMedical) ;

ALTER TABLE S0CMEDH
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE S0CMEDH
ALTER COLUMN JatahMedical SET DEFAULT 0 ;
ALTER TABLE S0CMEDH
ALTER COLUMN JatahMedicalKel SET DEFAULT 0 ;
ALTER TABLE S0CMEDH
ALTER COLUMN Pemakaian SET DEFAULT 0 ;
ALTER TABLE S0CMEDH
ALTER COLUMN PemakaianKel SET DEFAULT 0 ;
ALTER TABLE S0CMEDH
ALTER COLUMN PemakaianKelOvr SET DEFAULT 0 ;



-- SUMMARY PEMAKAIAN MEDICAL PER NIP-JENIS MEDICAL (DETAIL)
CREATE TABLE S0DMEDD(
	S0D_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	Tahun DECIMAL(4,0) NOT NULL,
	JenisMedical VARCHAR(4) NOT NULL,
	Tanggal DATE NOT NULL,
	Pemakaian DECIMAL(15,2) ,
	Keterangan VARCHAR(30) ,
	S0C_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0DKey1 PRIMARY KEY (S0D_ID)) ;

   CREATE UNIQUE INDEX S0DUK1 ON S0DMEDD(NIP,Tahun,JenisMedical,Tanggal) ;

create INDEX S0DKey2 ON S0DMEDD(S0C_ID) ;

ALTER TABLE S0DMEDD
ALTER COLUMN Tahun SET DEFAULT 0 ;
ALTER TABLE S0DMEDD
ALTER COLUMN Pemakaian SET DEFAULT 0 ;

ALTER TABLE S0DMEDD ADD
   CONSTRAINT S0DKey2 FOREIGN KEY (S0C_ID)
   REFERENCES S0CMEDH(S0C_ID) ON DELETE CASCADE ;



---Lock Info ---------
--SET QUOTED_IDENTIFIER ON
 CREATE TABLE LOCKINFO(
   ID INT ,
   Keterangan VARCHAR(50) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT LocKey1 PRIMARY KEY (ID))
;


-- Temporary MyDummy1
-- ; CREATE TABLE MyDummy1(
--    FieldDummy INT)
-- --
-- 
-- -- ; CREATE TABLE TABELTEMP
-- 
-- ; CREATE TABLE TABELTEMP(
--    TMPCODE VARCHAR(3) ,
--    COLDEF VARCHAR(5000))

-- ; create File Filtering Group
/*

Tdk Perlu lagi karena data dibuat TPS

SET QUOTED_IDENTIFIER ON
; CREATE TABLE M50WGRP(
   WorkGroup INT,
   CabFr VARCHAR(4) ,
   CabTo VARCHAR(4) ,
   GolFr VARCHAR(4) ,
   GolTo VARCHAR(4) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M50Key1 PRIMARY KEY (WorkGroup))
; create INDEX M50Key2 ON M50WGRP(GolFr)
; create INDEX M50Key3 ON M50WGRP(GolTo)
; create INDEX M50Key4 ON M50WGRP(CabFr)
; create INDEX M50Key5 ON M50WGRP(CabTo)
*/
---- 
-- ; CREATE TABLE MyDummy3(
--    result VARCHAR(101))
-- --
-- ; CREATE TABLE MyDummy2(
--    result DECIMAL(15,2))

--****************Buat Data Version*************
CREATE TABLE VerHist (
VER varchar(20) ,
DATE timestamp   DEFAULT current_timestamp);


create or replace function p_GetLastVerHist() returns varchar
as $$
declare l_ver varchar(20) ;
begin
 l_ver:=' ' ; 
if (select count(VER) from verhist)>0 then 
   l_ver:=(select VER as VER from VerHist where DATE = (select max(DATE) as DT from VerHist));
end if; 
return l_ver; 
end ; 
$$ LANGUAGE plpgsql;


create or replace function p_InsVerHist (l_pver varchar(20)) returns void 
as $$
begin
if (rtrim(l_pver) > '') then 
  insert into  VerHist (VER) values(l_pver);
else
  RAISE NOTICE 'ERROR: Empty Version Number';	
end if; 
end; 	
  $$ LANGUAGE plpgsql;

--****************END Buat Data Version*************

-- Table Untuk Result Nilai dari SQL

-- if exists (select * from sysobjects where id = object_id(N'[dbo].[QueryTable]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
-- drop table [dbo].[QueryTable]
-- GO
-- 
-- ; CREATE TABLE [dbo].[QueryTable] (
-- 	[IntField] [int] NULL ,
-- 	[DateField] [DATE] NULL ,
-- 	[DecField] [decimal](15, 2) NULL ,
-- 	[TextField] [varchar] (255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
-- ) ON [PRIMARY]
-- GO

-- ********** tambahan product group oi jadi core 
CREATE TABLE M54PARA(
	RID VARCHAR(1) NOT NULL,
	Nama VARCHAR(30) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M54Key1 PRIMARY KEY (RID)) ; 


CREATE TABLE M55PGRP(
	M55_ID SERIAL,
	RID VARCHAR(1) NOT NULL,
	Kode VARCHAR(4) NOT NULL,
	Nama VARCHAR(30) ,
	Singkatan VARCHAR(10) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M55Key1 PRIMARY KEY (M55_ID)) ; 

   CREATE UNIQUE INDEX M55UK1 ON M55PGRP(RID,Kode) ;

create INDEX M55Key2 ON M55PGRP(RID) ;
create INDEX M55Key3 ON M55PGRP(Kode) ;

CREATE TABLE M56NGRP(
	M56_ID SERIAL,
	RID VARCHAR(1) ,
	NIP VARCHAR(10) NOT NULL,
	KdPGrp VARCHAR(4) ,
	TglBerlaku DATE NOT NULL,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M55_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M56Key1 PRIMARY KEY (M56_ID)) ; 

   CREATE UNIQUE INDEX M56UK1 ON M56NGRP(NIP,TglBerlaku) ;

create INDEX M56Key2 ON M56NGRP(NIP) ;
create INDEX M56Key3 ON M56NGRP(M55_ID) ;
create INDEX M56Key4 ON M56NGRP(RID,NIP,KdPGrp,TglBerlaku) ;
--create INDEX M56Key5 ON M56NGRP(RID,KdPGrp,NIP,TglBerlaku) ;


ALTER TABLE M56NGRP ADD
   CONSTRAINT M56Key3 FOREIGN KEY (M55_ID)
   REFERENCES M55PGRP(M55_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

ALTER TABLE M56NGRP ADD
   CONSTRAINT M56Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;


----------------------------------------------------- MODUL ASURANSI --------------------------------------------------
CREATE TABLE M57PREH(
	M57_ID SERIAL,
	KdJAsu VARCHAR(4) NOT NULL,
	LvlBenefit VARCHAR(20) NOT NULL,
	Recs DECIMAL(5,0) ,
	Recs2 DECIMAL(5,0) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M57Key1 PRIMARY KEY (M57_ID)) ; 

   CREATE UNIQUE INDEX M57UK1 ON M57PREH(KdJAsu,LvlBenefit) ;

create INDEX M57Key2 ON M57PREH(KdJAsu) ;

ALTER TABLE M57PREH
ALTER COLUMN RECS SET DEFAULT 0 ;

ALTER TABLE M57PREH
ALTER COLUMN RECS2 SET DEFAULT 0 ;

ALTER TABLE M57PREH ADD
   CONSTRAINT M57Key2 FOREIGN KEY (KdJAsu)
   REFERENCES M44JASU(Kode) ON UPDATE RESTRICT ON DELETE RESTRICT ;

CREATE TABLE M58PRED(
	M58_ID SERIAL,
	KdJAsu VARCHAR(4) NOT NULL,
	LvlBenefit VARCHAR(20) NOT NULL,
	KdKJab VARCHAR(4) NOT NULL,
	M57_ID INTEGER, 
	M06_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M58Key1 PRIMARY KEY (M58_ID)) ; 

   CREATE UNIQUE INDEX M58UK1 ON M58PRED(KdJAsu,LvlBenefit,KdKJab) ;

create INDEX M58Key2 ON M58PRED(M57_ID) ; 
create INDEX M58Key3 ON M58PRED(M06_ID) ;

ALTER TABLE M58PRED ADD
   CONSTRAINT M58Key3 FOREIGN KEY (M06_ID)
   REFERENCES M06HKJB(M06_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ; 

ALTER TABLE M58PRED ADD
   CONSTRAINT M58Key2 FOREIGN KEY (M57_ID)
   REFERENCES M57PREH(M57_ID) ON DELETE CASCADE ;


CREATE TABLE M59PRE2(
	M59_ID SERIAL,
	KdJAsu VARCHAR(4) NOT NULL,
	LvlBenefit VARCHAR(20) NOT NULL,
	Tahun VARCHAR(4) NOT NULL,
	PremiMS DECIMAL(15,0) ,
	PremiMK0 DECIMAL(15,0) ,
	PremiMK1 DECIMAL(15,0) ,
	PremiMK2 DECIMAL(15,0) ,
	PremiMK3 DECIMAL(15,0) ,
	PremiFS DECIMAL(15,0) ,
	PremiFK0 DECIMAL(15,0) ,
	PremiFK1 DECIMAL(15,0) ,
	PremiFK2 DECIMAL(15,0) ,
	PremiFK3 DECIMAL(15,0) ,
	BenefitMS DECIMAL(15,0) ,
	BenefitMK0 DECIMAL(15,0) ,
	BenefitMK1 DECIMAL(15,0) ,
	BenefitMK2 DECIMAL(15,0) ,
	BenefitMK3 DECIMAL(15,0) ,
	BenefitFS DECIMAL(15,0) ,
	BenefitFK0 DECIMAL(15,0) ,
	BenefitFK1 DECIMAL(15,0) ,
	BenefitFK2 DECIMAL(15,0) ,
	BenefitFK3 DECIMAL(15,0) ,
	M57_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M59Key1 PRIMARY KEY (M59_ID)) ; 

   CREATE UNIQUE INDEX M59UK1 ON M59PRE2(KdJAsu,LvlBenefit,Tahun) ;

create INDEX M59Key2 ON M59PRE2(M57_ID) ;

ALTER TABLE M59PRE2 ADD
   CONSTRAINT M59Key2 FOREIGN KEY (M57_ID)
   REFERENCES M57PREH(M57_ID) ON DELETE CASCADE ;

ALTER TABLE M59PRE2
ALTER COLUMN PREMIMS SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIMK0 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIMK1 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIMK2 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIMK3 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIFS SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIFK0 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIFK1 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIFK2 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN PREMIFK3 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITMS SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITMK0 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITMK1 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITMK2 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITMK3 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITFS SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITFK0 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITFK1 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITFK2 SET DEFAULT 0 ;
ALTER TABLE M59PRE2
ALTER COLUMN BENEFITFK3 SET DEFAULT 0 ;

CREATE TABLE S0FPDAP(
	S0F_ID SERIAL,
	Periode DATE NOT NULL,
	Flag VARCHAR(1) NOT NULL,
	NIP VARCHAR(10) NOT NULL,
	NoKartu VARCHAR(20) NOT NULL,
	Status VARCHAR(2) ,
	NamaPeserta VARCHAR(25) NOT NULL,
	Hubungan VARCHAR(1) ,
	JnsKlmn VARCHAR(1) ,
	TglLahir DATE,
	NoRekbank VARCHAR(20) ,
	KdUKer VARCHAR(8) ,
	KdCaba VARCHAR(4) ,
	KdKJab VARCHAR(4) ,
	KdJAsu VARCHAR(4) NOT NULL,
	LvlBenefit VARCHAR(20) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0FKey1 PRIMARY KEY (S0F_ID)) ; 

   CREATE UNIQUE INDEX S0FUK1 ON S0FPDAP(Periode,Flag,NIP,NoKartu,NamaPeserta,KdJAsu) ;

ALTER TABLE S0FPDAP
ADD CONSTRAINT C_S0FFlag CHECK(Flag IN ('U', 'N', 'R', 'X')) ;

--; ALTER TABLE S0FPDAP
--ADD CONSTRAINT C_S0FStatus CHECK(Status IN ('L', 'K', 'X', 'D')) ;

ALTER TABLE S0FPDAP
ADD CONSTRAINT C_S0FJnsKlmn CHECK(JnsKlmn IN ('L', 'P')) ;
-- '1'=Pasangan, '2'=Anak, '3'=Ayah, '4'=Ibu, '5'=Lain-lain
ALTER TABLE S0FPDAP
ADD CONSTRAINT C_S0FHubungan CHECK(Hubungan IN (' ','1', '2', '3', '4', '5')) ;

CREATE TABLE S0GPREM(
	S0G_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	PrdMulai DATE NOT NULL,
	Prdsd DATE NOT NULL,
	Nilai DECIMAL(15,2) ,
	KdCurr VARCHAR(4) ,
	Persen DECIMAL(5,2) ,
	BayarDimuka INT ,
	Flag INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M03_ID INTEGER , 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT S0GKey1 PRIMARY KEY (S0G_ID )) ; 

   CREATE UNIQUE INDEX S0GUK1 ON S0GPREM(NIP,FlgDpPt,KdDpPt,PrdMulai,Prdsd ) ;

create INDEX S0GKey2 ON S0GPREM(NIP) ;
create INDEX S0GKey3 ON S0GPREM(M03_ID) ;
create INDEX S0GKey4 ON S0GPREM(KdCurr) ;

ALTER TABLE S0GPREM
ALTER COLUMN Nilai SET DEFAULT 0 ;
ALTER TABLE S0GPREM
ALTER COLUMN Persen SET DEFAULT 0 ;
ALTER TABLE S0GPREM
ALTER COLUMN BayarDimuka SET DEFAULT 0 ;
ALTER TABLE S0GPREM
ALTER COLUMN Flag SET DEFAULT 0 ;


---------------------------------------------------------------konstruksi ----------------------------------------------
--2006 06 07 
CREATE TABLE Z03PTGL(
	JournalType VARCHAR(8) ,
	KdCabang VARCHAR(4) ,
	KetCabang VARCHAR(20) ,
	Description VARCHAR(30) ,
	ApplyDate DATE,
	Document VARCHAR(16) ,
	AccountCode VARCHAR(32) ,
	Proyek VARCHAR(6) ,
	Currency VARCHAR(8) ,
	Debit DECIMAL(15,2) ,
	Credit DECIMAL(15,2) ,
	Description2 VARCHAR(40) ,
	Hold INT ,
	Intercompany INT ,
	Reversing INT ,
	Repeating INT ,
	Recurring INT ,
	CaptureFlg INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT Z03Key1 PRIMARY KEY (KdCabang,Proyek,Document,AccountCode)) ;

--   CREATE UNIQUE INDEX Z03UK1 ON Z03PTGL(KdCabang,Proyek,Document,AccountCodn) ;

ALTER TABLE Z03PTGL
ALTER COLUMN Debit SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Credit SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Hold SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Intercompany SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Reversing SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Repeating SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN Recurring SET DEFAULT 0 ;
ALTER TABLE Z03PTGL
ALTER COLUMN CaptureFlg SET DEFAULT 0 ;


CREATE TABLE M60TSHT(
	M60_ID SERIAL,
	RID VARCHAR(1) NOT NULL,
	KdPGrp VARCHAR(4) NOT NULL,
	TglPayroll DATE NOT NULL,
	Proyek VARCHAR(6) NOT NULL,
	PrsDist DECIMAL(5,2) ,
	FlagM VARCHAR(1) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M55_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M60Key1 PRIMARY KEY (M60_ID)) ;

   CREATE UNIQUE INDEX M60UK1 ON M60TSHT(RID,KdPGrp,Proyek,TglPayroll) ;

create INDEX M60Key2 ON M60TSHT(M55_ID) ;
create INDEX M60Key3 ON M60TSHT(Proyek) ;
create INDEX M60Key4 ON M60TSHT(RID,KdPGrp,Proyek,TglPayroll) ;

ALTER TABLE M60TSHT ADD
   CONSTRAINT M60Key2 FOREIGN KEY (M55_ID)
   REFERENCES M55PGRP(M55_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- ; ALTER TABLE M60TSHT ADD
--    CONSTRAINT M60Key3 FOREIGN KEY (Proyek)
--    REFERENCES M14PROJ(Proj)

ALTER TABLE M60TSHT
ALTER COLUMN PrsDist SET DEFAULT 0 ;

CREATE TABLE M61DBCB(
	M61_ID SERIAL,
	KdCaba VARCHAR(4) NOT NULL,
	Server VARCHAR(32) ,
	DBase VARCHAR(33) ,
	FPMS VARCHAR(20) ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	M08_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M61Key1 PRIMARY KEY (M61_ID)) ; 

   CREATE UNIQUE INDEX M61UK1 ON M61DBCB (M08_ID) ;

ALTER TABLE M61DBCB ADD
   FOREIGN KEY (M08_ID)
   REFERENCES M08HCAB(M08_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

CREATE TABLE M62EFST(
	M62_ID SERIAL,
	NIP VARCHAR(10) NOT NULL,
	TglEfektif DATE NOT NULL,
	Status VARCHAR(1) ,
	StsPjk VARCHAR(2) ,
	AnakTtgg INT ,
	Userid VARCHAR(12) ,
	UpdDate DATE,
	UpdTime TIMESTAMP,
	Ws VARCHAR(1) ,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M62Key1 PRIMARY KEY (M62_ID)) ; 

   CREATE UNIQUE INDEX M62UK1 ON M62EFST(NIP,TglEfektif) ;

create INDEX M62Key2 ON M62EFST(NIP) ;

-- MBIL 
-- 'L'=Lajang, 'K'=Kawin, 'X'=Janda, 'D'=Duda
ALTER TABLE M62EFST
ADD CONSTRAINT C_M62Status CHECK(Status IN ('L', 'K', 'X', 'D')) ;
ALTER TABLE M62EFST
ADD CONSTRAINT C_M62StsPjk CHECK(StsPjk IN ('L0', 'L1', 'L2', 'L3', 'K0', 'K1', 'K2', 'K3')) ;
--SET DEFAULT 
ALTER TABLE M62EFST
ALTER COLUMN AnakTtgg SET DEFAULT 0 ;
ALTER TABLE M62EFST
ALTER COLUMN Status SET DEFAULT 'L' ;
ALTER TABLE M62EFST
ALTER COLUMN StsPjk SET DEFAULT 'L0' ;

ALTER TABLE M62EFST ADD
   CONSTRAINT M62Key2 FOREIGN KEY (NIP)
   REFERENCES M15PEGA(NIP) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- link hapis gl 
CREATE TABLE M63HPGL(
	M63_ID SERIAL,
	AccFr1 VARCHAR(8) ,
	AccFr2 VARCHAR(8) ,
	AccFr3 VARCHAR(8) ,
	AccFr4 VARCHAR(8) ,
	AccTo1 VARCHAR(8) ,
	AccTo2 VARCHAR(8) ,
	AccTo3 VARCHAR(8) ,
	AccTo4 VARCHAR(8) ,
	AccTgt VARCHAR(10) ,
	TpCCenterTgt VARCHAR(5) ,
	CdCCenterTgt VARCHAR(5) ,
	Userid VARCHAR(12) ,
	UpDATE DATE,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M63Key1 PRIMARY KEY (M63_ID)) ; 

   CREATE UNIQUE INDEX M63UK1 ON M63HPGL(AccFr1,AccFr2,AccFr3,AccFr4,AccTo1,AccTo2,AccTo3,AccTo4) ;

create INDEX M63Key2 ON M63HPGL(AccTo1,AccTo2,AccTo3,AccTo4) ;
create INDEX M63Key3 ON M63HPGL(AccTgt) ;


CREATE TABLE M64ADVH(
	M64_ID SERIAL,
	Level1 VARCHAR(1) NOT NULL,
	Kode1 VARCHAR(8) NOT NULL,
	Level2 VARCHAR(1) NOT NULL,
	Kode2 VARCHAR(8) NOT NULL,
	UserId VARCHAR(12),
	UpDATE DATE,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M64Key1 PRIMARY KEY (M64_ID)) ;

   CREATE UNIQUE INDEX M64UK1 ON M64ADVH(Level1,Kode1,Level2,Kode2) ;

create INDEX M64Key2 ON M64ADVH(Kode1) ;
create INDEX M64Key3 ON M64ADVH(Kode2) ;

-- MUST BE IN LIST 
ALTER TABLE M64ADVH
ADD CONSTRAINT C_M64Level1 CHECK(Level1 IN ('1', '2', '3', '4', '5', '6', '7')) ;

ALTER TABLE M64ADVH
ADD CONSTRAINT C_M64Level2 CHECK(Level2 IN ('1', '2', '3', '4', '5', '6', '7', '8')) ;

--SET DEFAULT 
ALTER TABLE M64ADVH
ALTER COLUMN Level1 SET DEFAULT '1' ;

ALTER TABLE M64ADVH
ALTER COLUMN Level2 SET DEFAULT '1' ;

--
CREATE TABLE M65ADVD(
	M65_ID SERIAL,
	Level1 VARCHAR(1) NOT NULL,
	Kode1 VARCHAR(8) NOT NULL,
	Level2 VARCHAR(1) NOT NULL,
	Kode2 VARCHAR(8) NOT NULL,
	FlgDpPt VARCHAR(1) NOT NULL,
	KdDpPt VARCHAR(4) NOT NULL,
	Persen DECIMAL(5,2),
	Nilai DECIMAL(15,2),
	KdCurr VARCHAR(4),
	Trans VARCHAR(1),
	M64_ID INTEGER, 
	M03_ID INTEGER, 
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT M65Key1 PRIMARY KEY (Level1,Kode1,Level2,Kode2,FlgDpPt,KdDpPt)) ; 

   CREATE UNIQUE INDEX M65UK1 ON M65ADVD(Level1,Kode1,Level2,Kode2,FlgDpPt,KdDpPt) ;

create INDEX M65Key2 ON M65ADVD(M64_ID) ;
create INDEX M65Key3 ON M65ADVD(M03_ID) ;
create INDEX M65Key4 ON M65ADVD(KdCurr) ;

-- MUST BE IN LIST 
ALTER TABLE M65ADVD
ADD CONSTRAINT C_M65FlgDpPt CHECK(FlgDpPt IN ('D', 'P')) ;

ALTER TABLE M65ADVD
ADD CONSTRAINT C_M65Trans CHECK(Trans IN ('Y', 'T')) ;

--SET DEFAULT 
ALTER TABLE M65ADVD
ALTER COLUMN FlgDpPt SET DEFAULT 'D' ;

ALTER TABLE M65ADVD
ALTER COLUMN Trans SET DEFAULT 'T' ;

-- RELASI 
ALTER TABLE M65ADVD ADD
   CONSTRAINT M65Key2 FOREIGN KEY (M64_ID)
   REFERENCES M64ADVH(M64_ID)
	ON DELETE CASCADE ;

ALTER TABLE M65ADVD ADD
   CONSTRAINT M65Key3 FOREIGN KEY (M03_ID)
   REFERENCES M03DPPT(M03_ID) ON UPDATE RESTRICT ON DELETE RESTRICT ;

ALTER TABLE M65ADVD ADD
   CONSTRAINT M65Key4 FOREIGN KEY (KdCurr)
   REFERENCES M40CURR(KDCURR) ON UPDATE RESTRICT ON DELETE RESTRICT ;

-- Table V14PROJ
CREATE TABLE V14PROJ(
	Proj VARCHAR(6) NOT NULL,
	ProjName VARCHAR(30) ,
	StartDate DATE,
	EndDate DATE,
	TglSuspend DATE,
	Userid VARCHAR(12) ,
	UpDATE DATE,
	VERSION int NULL,
	CREATED_BY varchar(15) NULL,
	CREATED_ON timestamp NULL,
	UPDATED_BY varchar(15) NULL,
	UPDATED_ON timestamp  NULL,
   CONSTRAINT V14Key1 PRIMARY KEY (Proj));

CREATE TABLE W01JRGR (
	AccountCode VARCHAR (32) ,
	GRUP VARCHAR (4) ,
	KdCabang VARCHAR (4) ,
	ApplyDate date NULL ,
	Currency VARCHAR (8) ,
	Debit decimal(15, 2) NULL ,
	Credit decimal(15, 2) NULL 
);
